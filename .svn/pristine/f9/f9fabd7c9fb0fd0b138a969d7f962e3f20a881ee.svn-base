var $$=$.noConflict();var locationNum,locationText;$$(".addressSelete").citys({required:false,nodata:"disabled",onChange:function(a){console.log(a);locationText=a.province+a.city+a.area;locationNum=a.code}});$(".input-right").on("click",function(){$(".loginintpu").removeClass("active");$(this).closest(".loginintpu").addClass("active")});$(document).on("input",".tel-vertification input",function(){var a=$(this).val();a=a.replace(/\s/,"");console.log($(".get-text-code").data("loading"));if(a.length==11){$(".get-text-code").removeClass("disable-btn");$(".get-text-code").data("loading",true)}else{$(".get-text-code").addClass("disable-btn");$(".get-text-code").data("loading",false)}if($(".get-text-code").data("loading")){return false}});function telVertification(){var b=$(".tel-vertification input").val();var a=$(".reminder").addClass("show");if(!(b.length==11)){a.html("您输入的号码位数不正确！");return false}if(!b.match(/^1[3,5,8,7]\d{9}$/g)){a.html("您输入的手机号码有误");return false}else{console.log("手机输入号码正确")}a.removeClass("active");return true}function getTextCode(e){var d=60;var c=$(e);var a=$(".reminder").addClass("show");var b=$(".tel-vertification input").val();if(!b){$.toast("请您先输入手机号码");$(".tel-vertification input")[0].focus();return false}if($(e).hasClass("disable-btn")){$(e).data("loading",true);return false}else{$(e).data("loading",false);if(!telVertification()){return false}$(e).addClass("disable-btn");$.ajax({url:"/accountBook/common/sendSmsCode?phone="+b+"&pageType=1",type:"get",dataType:"json",success:function(f){console.log(f);if(f.success){var g=setInterval(function(){d-=1;if(d<=0){clearInterval(g);c.data("loading",false);c.removeClass("disable-btn");a.html("")}else{c.data("loading",true);a.html('短信已发送，如未收到，请<span style="color:red;">'+d+"</span>s后再次获取")}},1000)}else{$.alert(f.message)}},error:function(f){console.log(f)}})}}$(document).on("input","#code",function(){var a="^[0-9]*$";if(!$("#code").val().match(a)){$("#code").val("");return}});$("#submit").on("click",function(){if(!$("#name").val()){$.toast("请输入姓名");return false}else{if(!$("#account").val()){$.toast("请输入帐号");return false}else{if(!$("#password").val()){$.toast("请输入密码");return false}else{if(!$("#code").val()){$.toast("请输入短信验证码");return false}else{if(!$("#code-v").val()){$.toast("请输入邀请码");return false}}}}}if(!$("#agreeInput").prop("checked")){$.toast("请同意协议后提交");return false}var a={};a.userName=$("#name").val();a.loginName=$("#account").val();a.password=md5($("#password").val());a.smscode=$("#code").val();a.invitecode=$("#code-v").val();a.location=locationNum;a.locationDesc=locationText;$.ajax({url:"/accountBook/bsinventoryuser",type:"post",data:a,dataType:"json",success:function(c){console.log(c);if(c.success){$.alert("注册成功");localStorage.setItem("userName",DES3.encrypt(result.retObj.userName));localStorage.setItem("userType",result.retObj.userType);localStorage.setItem("ud",DES3.encrypt(result.retObj.userId));localStorage.setItem("ownerId",DES3.encrypt(result.retObj.userId));var b=localStorage.getItem("type");window.location.href="entry.html?type="+b}else{$.alert(c.description)}},error:function(){$.alert("注册失败")}})});$("#openAgreeModal").on("click",function(){$(".agreeModal").show()});$(".agreeBtn").on("click",function(){$(".agreeModal").hide()});$.init();