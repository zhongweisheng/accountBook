/*!
 * =====================================================
 * SUI Mobile - http://m.sui.taobao.org/
 *
 * =====================================================
 */
;$.smVersion="0.6.2";+function(a){var b={autoInit:false,showPageLoadingIndicator:true,router:true,swipePanelOnlyClose:true};a.smConfig=a.extend(b,a.config)}(Zepto);+function(a){a.compareVersion=function(f,d){var e=f.split(".");var g=d.split(".");if(f===d){return 0}for(var h=0;h<e.length;h++){var c=parseInt(e[h]);if(!g[h]){return 1}var j=parseInt(g[h]);if(c<j){return -1}if(c>j){return 1}}return -1};a.getCurrentPage=function(){return a(".page-current")[0]||a(".page")[0]||document.body}}(Zepto);(function(b){["width","height"].forEach(function(d){var c=d.replace(/./,function(e){return e[0].toUpperCase()});b.fn["outer"+c]=function(h){var g=this;if(g){var e=g[d]();var f={width:["left","right"],height:["top","bottom"]};f[d].forEach(function(i){if(h){e+=parseInt(g.css("margin-"+i),10)}});return e}else{return null}}});b.support=(function(){var c={touch:!!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch)};return c})();b.touchEvents={start:b.support.touch?"touchstart":"mousedown",move:b.support.touch?"touchmove":"mousemove",end:b.support.touch?"touchend":"mouseup"};b.getTranslate=function(g,f){var c,e,h,d;if(typeof f==="undefined"){f="x"}h=window.getComputedStyle(g,null);if(window.WebKitCSSMatrix){d=new WebKitCSSMatrix(h.webkitTransform==="none"?"":h.webkitTransform)}else{d=h.MozTransform||h.transform||h.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");c=d.toString().split(",")}if(f==="x"){if(window.WebKitCSSMatrix){e=d.m41}else{if(c.length===16){e=parseFloat(c[12])}else{e=parseFloat(c[4])}}}if(f==="y"){if(window.WebKitCSSMatrix){e=d.m42}else{if(c.length===16){e=parseFloat(c[13])}else{e=parseFloat(c[5])}}}return e||0};b.requestAnimationFrame=function(c){if(requestAnimationFrame){return requestAnimationFrame(c)}else{if(webkitRequestAnimationFrame){return webkitRequestAnimationFrame(c)}else{if(mozRequestAnimationFrame){return mozRequestAnimationFrame(c)}else{return setTimeout(c,1000/60)}}}};b.cancelAnimationFrame=function(c){if(cancelAnimationFrame){return cancelAnimationFrame(c)}else{if(webkitCancelAnimationFrame){return webkitCancelAnimationFrame(c)}else{if(mozCancelAnimationFrame){return mozCancelAnimationFrame(c)}else{return clearTimeout(c)}}}};b.fn.dataset=function(){var f={},e=this[0].dataset;for(var c in e){var d=(f[c]=e[c]);if(d==="false"){f[c]=false}else{if(d==="true"){f[c]=true}else{if(parseFloat(d)===d*1){f[c]=d*1}}}}return b.extend({},f,this[0].__eleData)};b.fn.data=function(e,j){var g=b(this).dataset();if(!e){return g}if(typeof j==="undefined"){var c=g[e],h=this[0].__eleData;if(h&&(e in h)){return h[e]}else{return c}}else{for(var d=0;d<this.length;d++){var f=this[d];if(e in g){delete f.dataset[e]}if(!f.__eleData){f.__eleData={}}f.__eleData[e]=j}return this}};function a(c,h){var e=c,d,f=this;function g(i){if(i.target!==this){return}h.call(this,i);for(d=0;d<e.length;d++){f.off(e[d],g)}}if(h){for(d=0;d<e.length;d++){f.on(e[d],g)}}}b.fn.animationEnd=function(c){a.call(this,["webkitAnimationEnd","animationend"],c);return this};b.fn.transitionEnd=function(c){a.call(this,["webkitTransitionEnd","transitionend"],c);return this};b.fn.transition=function(e){if(typeof e!=="string"){e=e+"ms"}for(var d=0;d<this.length;d++){var c=this[d].style;c.webkitTransitionDuration=c.MozTransitionDuration=c.transitionDuration=e}return this};b.fn.transform=function(c){for(var e=0;e<this.length;e++){var d=this[e].style;d.webkitTransform=d.MozTransform=d.transform=c}return this};b.fn.prevAll=function(c){var e=[];var d=this[0];if(!d){return b([])}while(d.previousElementSibling){var f=d.previousElementSibling;if(c){if(b(f).is(c)){e.push(f)}}else{e.push(f)}d=f}return b(e)};b.fn.nextAll=function(d){var c=[];var f=this[0];if(!f){return b([])}while(f.nextElementSibling){var e=f.nextElementSibling;if(d){if(b(e).is(d)){c.push(e)}}else{c.push(e)}f=e}return b(c)};b.fn.show=function(){var d={};function c(g){var e,f;if(!d[g]){e=document.createElement(g);document.body.appendChild(e);f=getComputedStyle(e,"").getPropertyValue("display");e.parentNode.removeChild(e);f==="none"&&(f="block");d[g]=f}return d[g]}return this.each(function(){this.style.display==="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")==="none"){}this.style.display=c(this.nodeName)})}})(Zepto);(function(h){var d={};var c=navigator.userAgent;var f=c.match(/(Android);?[\s\/]+([\d.]+)?/);var m=c.match(/(iPad).*OS\s([\d_]+)/);var n=c.match(/(iPod)(.*OS\s([\d_]+))?/);var l=!m&&c.match(/(iPhone\sOS)\s([\d_]+)/);d.ios=d.android=d.iphone=d.ipad=d.androidChrome=false;if(f){d.os="android";d.osVersion=f[2];d.android=true;d.androidChrome=c.toLowerCase().indexOf("chrome")>=0}if(m||l||n){d.os="ios";d.ios=true}if(l&&!n){d.osVersion=l[2].replace(/_/g,".");d.iphone=true}if(m){d.osVersion=m[2].replace(/_/g,".");d.ipad=true}if(n){d.osVersion=n[3]?n[3].replace(/_/g,"."):null;d.iphone=true}if(d.ios&&d.osVersion&&c.indexOf("Version/")>=0){if(d.osVersion.split(".")[0]==="10"){d.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]}}d.webView=(l||m||n)&&c.match(/.*AppleWebKit(?!.*Safari)/i);if(d.os&&d.os==="ios"){var j=d.osVersion.split(".");d.minimalUi=!d.webView&&(n||l)&&(j[0]*1===7?j[1]*1>=1:j[0]*1>7)&&h('meta[name="viewport"]').length>0&&h('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var e=h(window).width();var b=h(window).height();d.statusBar=false;if(d.webView&&(e*b===screen.width*screen.height)){d.statusBar=true}else{d.statusBar=false}var a=[];d.pixelRatio=window.devicePixelRatio||1;a.push("pixel-ratio-"+Math.floor(d.pixelRatio));if(d.pixelRatio>=2){a.push("retina")}if(d.os){a.push(d.os,d.os+"-"+d.osVersion.split(".")[0],d.os+"-"+d.osVersion.replace(/\./g,"-"));if(d.os==="ios"){var k=parseInt(d.osVersion.split(".")[0],10);for(var g=k-1;g>=6;g--){a.push("ios-gt-"+g)}}}if(d.statusBar){a.push("with-statusbar-overlay")}else{h("html").removeClass("with-statusbar-overlay")}if(a.length>0){h("html").addClass(a.join(" "))}d.isWeixin=/MicroMessenger/i.test(c);h.device=d})(Zepto);(function(){function e(p,m){var q;m=m||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=m.touchBoundary||10;this.layer=p;this.tapDelay=m.tapDelay||200;this.tapTimeout=m.tapTimeout||700;if(e.notNeeded(p)){return}function r(l,i){return function(){return l.apply(i,arguments)}}var k=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var o=this;for(var n=0,j=k.length;n<j;n++){o[k[n]]=r(o[k[n]],o)}if(c){p.addEventListener("mouseover",this.onMouse,true);p.addEventListener("mousedown",this.onMouse,true);p.addEventListener("mouseup",this.onMouse,true)}p.addEventListener("click",this.onClick,true);p.addEventListener("touchstart",this.onTouchStart,false);p.addEventListener("touchmove",this.onTouchMove,false);p.addEventListener("touchend",this.onTouchEnd,false);p.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){p.removeEventListener=function(l,t,i){var s=Node.prototype.removeEventListener;if(l==="click"){s.call(p,l,t.hijacked||t,i)}else{s.call(p,l,t,i)}};p.addEventListener=function(s,t,l){var i=Node.prototype.addEventListener;if(s==="click"){i.call(p,s,t.hijacked||(t.hijacked=function(u){if(!u.propagationStopped){t(u)}}),l)}else{i.call(p,s,t,l)}}}if(typeof p.onclick==="function"){q=p.onclick;p.addEventListener("click",function(i){q(i)},false);p.onclick=null}}var d=navigator.userAgent.indexOf("Windows Phone")>=0;var c=navigator.userAgent.indexOf("Android")>0&&!d;var h=/iP(ad|hone|od)/.test(navigator.userAgent)&&!d;var f=h&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var g=h&&(/OS [6-7]_\d/).test(navigator.userAgent);var b=navigator.userAgent.indexOf("BB10")>0;var a=false;e.prototype.needsClick=function(j){var i=j;while(i&&(i.tagName.toUpperCase()!=="BODY")){if(i.tagName.toUpperCase()==="LABEL"){a=true;if((/\bneedsclick\b/).test(i.className)){return true}}i=i.parentNode}switch(j.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(j.disabled){return true}break;case"input":if((h&&j.type==="file")||j.disabled){return true}break;case"label":case"iframe":case"video":return true}return(/\bneedsclick\b/).test(j.className)};e.prototype.needsFocus=function(i){switch(i.nodeName.toLowerCase()){case"textarea":return true;case"select":return !c;case"input":switch(i.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !i.disabled&&!i.readOnly;default:return(/\bneedsfocus\b/).test(i.className)}};e.prototype.sendClick=function(j,k){var i,l;if(document.activeElement&&document.activeElement!==j){document.activeElement.blur()}l=k.changedTouches[0];i=document.createEvent("MouseEvents");i.initMouseEvent(this.determineEventType(j),true,true,window,1,l.screenX,l.screenY,l.clientX,l.clientY,false,false,false,false,0,null);i.forwardedTouchEvent=true;j.dispatchEvent(i)};e.prototype.determineEventType=function(i){if(c&&i.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};e.prototype.focus=function(j){var k;var i=["date","time","month","number","email"];if(h&&j.setSelectionRange&&i.indexOf(j.type)===-1){k=j.value.length;j.setSelectionRange(k,k)}else{j.focus()}};e.prototype.updateScrollParent=function(j){var k,i;k=j.fastClickScrollParent;if(!k||!k.contains(j)){i=j;do{if(i.scrollHeight>i.offsetHeight){k=i;j.fastClickScrollParent=i;break}i=i.parentElement}while(i)}if(k){k.fastClickLastScrollTop=k.scrollTop}};e.prototype.getTargetElementFromEventTarget=function(i){if(i.nodeType===Node.TEXT_NODE){return i.parentNode}return i};e.prototype.onTouchStart=function(k){var i,l,j;if(k.targetTouches.length>1){return true}i=this.getTargetElementFromEventTarget(k.target);l=k.targetTouches[0];if(h){j=window.getSelection();if(j.rangeCount&&!j.isCollapsed){return true}if(!f){if(l.identifier&&l.identifier===this.lastTouchIdentifier){k.preventDefault();return false}this.lastTouchIdentifier=l.identifier;this.updateScrollParent(i)}}this.trackingClick=true;this.trackingClickStart=k.timeStamp;this.targetElement=i;this.touchStartX=l.pageX;this.touchStartY=l.pageY;if((k.timeStamp-this.lastClickTime)<this.tapDelay){k.preventDefault()}return true};e.prototype.touchHasMoved=function(i){var k=i.changedTouches[0],j=this.touchBoundary;if(Math.abs(k.pageX-this.touchStartX)>j||Math.abs(k.pageY-this.touchStartY)>j){return true}return false};e.prototype.onTouchMove=function(i){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(i.target)||this.touchHasMoved(i)){this.trackingClick=false;this.targetElement=null}return true};e.prototype.findControl=function(i){if(i.control!==undefined){return i.control}if(i.htmlFor){return document.getElementById(i.htmlFor)}return i.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};e.prototype.onTouchEnd=function(l){var n,m,k,p,o,j=this.targetElement;if(!this.trackingClick){return true}if((l.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}if((l.timeStamp-this.trackingClickStart)>this.tapTimeout){return true}var i=["date","time","month"];if(i.indexOf(l.target.type)!==-1){return false}this.cancelNextClick=false;this.lastClickTime=l.timeStamp;m=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(g){o=l.changedTouches[0];j=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||j;j.fastClickScrollParent=this.targetElement.fastClickScrollParent}k=j.tagName.toLowerCase();if(k==="label"){n=this.findControl(j);if(n){this.focus(j);if(c){return false}j=n}}else{if(this.needsFocus(j)){if((l.timeStamp-m)>100||(h&&window.top!==window&&k==="input")){this.targetElement=null;return false}this.focus(j);this.sendClick(j,l);if(!h||k!=="select"){this.targetElement=null;l.preventDefault()}return false}}if(h&&!f){p=j.fastClickScrollParent;if(p&&p.fastClickLastScrollTop!==p.scrollTop){return true}}if(!this.needsClick(j)){l.preventDefault();this.sendClick(j,l)}return false};e.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};e.prototype.onMouse=function(i){if(!this.targetElement){return true}if(i.forwardedTouchEvent){return true}if(!i.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(i.stopImmediatePropagation){i.stopImmediatePropagation()}else{i.propagationStopped=true}i.stopPropagation();if(!a){i.preventDefault()}return false}return true};e.prototype.onClick=function(i){var j;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(i.target.type==="submit"&&i.detail===0){return true}j=this.onMouse(i);if(!j){this.targetElement=null}return j};e.prototype.destroy=function(){var i=this.layer;if(c){i.removeEventListener("mouseover",this.onMouse,true);i.removeEventListener("mousedown",this.onMouse,true);i.removeEventListener("mouseup",this.onMouse,true)}i.removeEventListener("click",this.onClick,true);i.removeEventListener("touchstart",this.onTouchStart,false);i.removeEventListener("touchmove",this.onTouchMove,false);i.removeEventListener("touchend",this.onTouchEnd,false);i.removeEventListener("touchcancel",this.onTouchCancel,false)};e.notNeeded=function(j){var i;var m;var l;var k;if(typeof window.ontouchstart==="undefined"){return true}m=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(m){if(c){i=document.querySelector("meta[name=viewport]");if(i){if(i.content.indexOf("user-scalable=no")!==-1){return true}if(m>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(b){l=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(l[1]>=10&&l[2]>=3){i=document.querySelector("meta[name=viewport]");if(i){if(i.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(j.style.msTouchAction==="none"||j.style.touchAction==="manipulation"){return true}k=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(k>=27){i=document.querySelector("meta[name=viewport]");if(i&&(i.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(j.style.touchAction==="none"||j.style.touchAction==="manipulation"){return true}return false};e.attach=function(j,i){return new e(j,i)};window.FastClick=e}());+function(a){var d=document.createElement("div");a.modalStack=[];a.modalStackClearQueue=function(){if(a.modalStack.length){(a.modalStack.shift())()}};a.modal=function(k){k=k||{};var l="";var h="";if(k.buttons&&k.buttons.length>0){for(var m=0;m<k.buttons.length;m++){h+='<span class="modal-button'+(k.buttons[m].bold?" modal-button-bold":"")+'">'+k.buttons[m].text+"</span>"}}var j=k.extraClass||"";var g=k.title?'<div class="modal-title">'+k.title+"</div>":"";var e=k.text?'<div class="modal-text">'+k.text+"</div>":"";var n=k.afterText?k.afterText:"";var p=!k.buttons||k.buttons.length===0?"modal-no-buttons":"";var f=k.verticalButtons?"modal-buttons-vertical":"";l='<div class="modal '+j+" "+p+'"><div class="modal-inner">'+(g+e+n)+'</div><div class="modal-buttons '+f+'">'+h+"</div></div>";d.innerHTML=l;var o=a(d).children();a(b.modalContainer).append(o[0]);o.find(".modal-button").each(function(i,q){a(q).on("click",function(r){if(k.buttons[i].close!==false){a.closeModal(o)}if(k.buttons[i].onClick){k.buttons[i].onClick(o,r)}if(k.onClick){k.onClick(o,i)}})});a.openModal(o);return o[0]};a.alert=function(g,f,e){if(typeof f==="function"){e=arguments[1];f=undefined}return a.modal({text:g||"",title:typeof f==="undefined"?b.modalTitle:f,buttons:[{text:b.modalButtonOk,bold:true,onClick:e}]})};a.confirm=function(g,f,e,h){if(typeof f==="function"){h=arguments[2];e=arguments[1];f=undefined}return a.modal({text:g||"",title:typeof f==="undefined"?b.modalTitle:f,buttons:[{text:b.modalButtonCancel,onClick:h},{text:b.modalButtonOk,bold:true,onClick:e}]})};a.prompt=function(g,f,e,h){if(typeof f==="function"){h=arguments[2];e=arguments[1];f=undefined}return a.modal({text:g||"",title:typeof f==="undefined"?b.modalTitle:f,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:b.modalButtonCancel},{text:b.modalButtonOk,bold:true}],onClick:function(j,i){if(i===0&&h){h(a(j).find(".modal-text-input").val())}if(i===1&&e){e(a(j).find(".modal-text-input").val())}}})};a.modalLogin=function(g,f,e,h){if(typeof f==="function"){h=arguments[2];e=arguments[1];f=undefined}return a.modal({text:g||"",title:typeof f==="undefined"?b.modalTitle:f,afterText:'<input type="text" name="modal-username" placeholder="'+b.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+b.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:b.modalButtonCancel},{text:b.modalButtonOk,bold:true}],onClick:function(k,j){var l=a(k).find('.modal-text-input[name="modal-username"]').val();var i=a(k).find('.modal-text-input[name="modal-password"]').val();if(j===0&&h){h(l,i)}if(j===1&&e){e(l,i)}}})};a.modalPassword=function(g,f,e,h){if(typeof f==="function"){h=arguments[2];e=arguments[1];f=undefined}return a.modal({text:g||"",title:typeof f==="undefined"?b.modalTitle:f,afterText:'<input type="password" name="modal-password" placeholder="'+b.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:b.modalButtonCancel},{text:b.modalButtonOk,bold:true}],onClick:function(k,j){var i=a(k).find('.modal-text-input[name="modal-password"]').val();if(j===0&&h){h(i)}if(j===1&&e){e(i)}}})};a.showPreloader=function(e){a.hidePreloader();a.showPreloader.preloaderModal=a.modal({title:e||b.modalPreloaderTitle,text:'<div class="preloader"></div>'});return a.showPreloader.preloaderModal};a.hidePreloader=function(){a.showPreloader.preloaderModal&&a.closeModal(a.showPreloader.preloaderModal)};a.showIndicator=function(){if(a(".preloader-indicator-modal")[0]){return}a(b.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')};a.hideIndicator=function(){a(".preloader-indicator-overlay, .preloader-indicator-modal").remove()};a.actions=function(h){var o,e,q;h=h||[];if(h.length>0&&!a.isArray(h[0])){h=[h]}var k;var g="";for(var m=0;m<h.length;m++){for(var l=0;l<h[m].length;l++){if(l===0){g+='<div class="actions-modal-group">'}var n=h[m][l];var p=n.label?"actions-modal-label":"actions-modal-button";if(n.bold){p+=" actions-modal-button-bold"}if(n.color){p+=" color-"+n.color}if(n.bg){p+=" bg-"+n.bg}if(n.disabled){p+=" disabled"}g+='<span class="'+p+'">'+n.text+"</span>";if(l===h[m].length-1){g+="</div>"}}}k='<div class="actions-modal">'+g+"</div>";d.innerHTML=k;o=a(d).children();a(b.modalContainer).append(o[0]);e=".actions-modal-group";q=".actions-modal-button";var f=o.find(e);f.each(function(i,j){var r=i;a(j).children().each(function(t,u){var w=t;var v=h[r][w];var s;if(a(u).is(q)){s=a(u)}if(s){s.on("click",function(x){if(v.close!==false){a.closeModal(o)}if(v.onClick){v.onClick(o,x)}})}})});a.openModal(o);return o[0]};a.popup=function(f,g){if(typeof g==="undefined"){g=true}if(typeof f==="string"&&f.indexOf("<")>=0){var e=document.createElement("div");e.innerHTML=f.trim();if(e.childNodes.length>0){f=e.childNodes[0];if(g){f.classList.add("remove-on-close")}a(b.modalContainer).append(f)}else{return false}}f=a(f);if(f.length===0){return false}f.show();f.find(".content").scroller("refresh");if(f.find("."+b.viewClass).length>0){a.sizeNavbars(f.find("."+b.viewClass)[0])}a.openModal(f);return f[0]};a.pickerModal=function(f,e){if(typeof e==="undefined"){e=true}if(typeof f==="string"&&f.indexOf("<")>=0){f=a(f);if(f.length>0){if(e){f.addClass("remove-on-close")}a(b.modalContainer).append(f[0])}else{return false}}f=a(f);if(f.length===0){return false}f.show();a.openModal(f);return f[0]};a.loginScreen=function(e){if(!e){e=".login-screen"}e=a(e);if(e.length===0){return false}e.show();if(e.find("."+b.viewClass).length>0){a.sizeNavbars(e.find("."+b.viewClass)[0])}a.openModal(e);return e[0]};a.toast=function(h,g,e){var f=a('<div class="modal toast '+(e||"")+'">'+h+"</div>").appendTo(document.body);a.openModal(f,function(){setTimeout(function(){a.closeModal(f)},g||2000)})};a.openModal=function(l,e){l=a(l);var k=l.hasClass("modal"),i=!l.hasClass("toast");if(a(".modal.modal-in:not(.modal-out)").length&&b.modalStack&&k&&i){a.modalStack.push(function(){a.openModal(l,e)});return}var n=l.hasClass("popup");var g=l.hasClass("login-screen");var h=l.hasClass("picker-modal");var m=l.hasClass("toast");if(k){l.show();l.css({marginTop:-Math.round(l.outerHeight()/2)+"px"})}if(m){l.css({marginLeft:-Math.round(l.outerWidth()/2/1.185)+"px"})}var f;if(!g&&!h&&!m){if(a(".modal-overlay").length===0&&!n){a(b.modalContainer).append('<div class="modal-overlay"></div>')}if(a(".popup-overlay").length===0&&n){a(b.modalContainer).append('<div class="popup-overlay"></div>')}f=n?a(".popup-overlay"):a(".modal-overlay")}var j=l[0].clientLeft;l.trigger("open");if(h){a(b.modalContainer).addClass("with-picker-modal")}if(!g&&!h&&!m){f.addClass("modal-overlay-visible")}l.removeClass("modal-out").addClass("modal-in").transitionEnd(function(o){if(l.hasClass("modal-out")){l.trigger("closed")}else{l.trigger("opened")}});if(typeof e==="function"){e.call(this)}return true};a.closeModal=function(i){i=a(i||".modal-in");if(typeof i!=="undefined"&&i.length===0){return}var l=i.hasClass("modal"),h=i.hasClass("popup"),e=i.hasClass("toast"),k=i.hasClass("login-screen"),g=i.hasClass("picker-modal"),j=i.hasClass("remove-on-close"),f=h?a(".popup-overlay"):a(".modal-overlay");if(h){if(i.length===a(".popup.modal-in").length){f.removeClass("modal-overlay-visible")}}else{if(!(g||e)){f.removeClass("modal-overlay-visible")}}i.trigger("close");if(g){a(b.modalContainer).removeClass("with-picker-modal");a(b.modalContainer).addClass("picker-modal-closing")}i.removeClass("modal-in").addClass("modal-out").transitionEnd(function(m){if(i.hasClass("modal-out")){i.trigger("closed")}else{i.trigger("opened")}if(g){a(b.modalContainer).removeClass("picker-modal-closing")}if(h||k||g){i.removeClass("modal-out").hide();if(j&&i.length>0){i.remove()}}else{i.remove()}});if(l&&b.modalStack){a.modalStackClearQueue()}return true};function c(j){var i=a(this);var g=i.attr("href");var h=i.dataset();var f;if(i.hasClass("open-popup")){if(h.popup){f=h.popup}else{f=".popup"}a.popup(f)}if(i.hasClass("close-popup")){if(h.popup){f=h.popup}else{f=".popup.modal-in"}a.closeModal(f)}if(i.hasClass("modal-overlay")){if(a(".modal.modal-in").length>0&&b.modalCloseByOutside){a.closeModal(".modal.modal-in")}if(a(".actions-modal.modal-in").length>0&&b.actionsCloseByOutside){a.closeModal(".actions-modal.modal-in")}}if(i.hasClass("popup-overlay")){if(a(".popup.modal-in").length>0&&b.popupCloseByOutside){a.closeModal(".popup.modal-in")}}}a(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .close-picker",c);var b=a.modal.prototype.defaults={modalStack:true,modalButtonOk:"确定",modalButtonCancel:"取消",modalPreloaderTitle:"加载中",modalContainer:document.body}}(Zepto);+function(a){var b=false;var c=function(g){var d=this;var h={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],firstDay:1,weekendDays:[0,6],multiple:false,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:true,animate:true,closeOnSelect:true,monthPicker:true,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:true,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:true,scrollToInput:true,inputReadOnly:true,toolbar:true,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'};g=g||{};for(var f in h){if(typeof g[f]==="undefined"){g[f]=h[f]}}d.params=g;d.initialized=false;d.inline=d.params.container?true:false;d.isH=d.params.direction==="horizontal";var i=d.isH?(b?-1:1):1;d.animating=false;function k(p){p=new Date(p);var q=p.getFullYear();var r=p.getMonth();var m=r+1;var n=p.getDate();var o=p.getDay();return d.params.dateFormat.replace(/yyyy/g,q).replace(/yy/g,(q+"").substring(2)).replace(/mm/g,m<10?"0"+m:m).replace(/m/g,m).replace(/MM/g,d.params.monthNames[r]).replace(/M/g,d.params.monthNamesShort[r]).replace(/dd/g,n<10?"0"+n:n).replace(/d/g,n).replace(/DD/g,d.params.dayNames[o]).replace(/D/g,d.params.dayNamesShort[o])}d.addValue=function(o){if(d.params.multiple){if(!d.value){d.value=[]}var n;for(var m=0;m<d.value.length;m++){if(new Date(o).getTime()===new Date(d.value[m]).getTime()){n=m}}if(typeof n==="undefined"){d.value.push(o)}else{d.value.splice(n,1)}d.updateValue()}else{d.value=[o];d.updateValue()}};d.setValue=function(m){d.value=m;d.updateValue()};d.updateValue=function(){d.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var n,m;for(n=0;n<d.value.length;n++){var o=new Date(d.value[n]);d.wrapper.find('.picker-calendar-day[data-date="'+o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()+'"]').addClass("picker-calendar-day-selected")}if(d.params.onChange){d.params.onChange(d,d.value,d.value.map(k))}if(d.input&&d.input.length>0){if(d.params.formatValue){m=d.params.formatValue(d,d.value)}else{m=[];for(n=0;n<d.value.length;n++){m.push(k(d.value[n]))}m=m.join(", ")}a(d.input).val(m);a(d.input).trigger("change")}};d.initCalendarEvents=function(){var n;var y=true;var B,s,F,D,p,o,q,C,E,v,m,z,u,x,G;function r(H){if(s||B){return}B=true;F=o=H.type==="touchstart"?H.targetTouches[0].pageX:H.pageX;D=o=H.type==="touchstart"?H.targetTouches[0].pageY:H.pageY;q=(new Date()).getTime();u=0;y=true;G=undefined;E=v=d.monthsTranslate}function t(H){if(!B){return}p=H.type==="touchmove"?H.targetTouches[0].pageX:H.pageX;o=H.type==="touchmove"?H.targetTouches[0].pageY:H.pageY;if(typeof G==="undefined"){G=!!(G||Math.abs(o-D)>Math.abs(p-F))}if(d.isH&&G){B=false;return}H.preventDefault();if(d.animating){B=false;return}y=false;if(!s){s=true;m=d.wrapper[0].offsetWidth;z=d.wrapper[0].offsetHeight;d.wrapper.transition(0)}H.preventDefault();x=d.isH?p-F:o-D;u=x/(d.isH?m:z);v=(d.monthsTranslate*i+u)*100;d.wrapper.transform("translate3d("+(d.isH?v:0)+"%, "+(d.isH?0:v)+"%, 0)")}function w(H){if(!B||!s){B=s=false;return}B=s=false;C=new Date().getTime();if(C-q<300){if(Math.abs(x)<10){d.resetMonth()}else{if(x>=10){if(b){d.nextMonth()}else{d.prevMonth()}}else{if(b){d.prevMonth()}else{d.nextMonth()}}}}else{if(u<=-0.5){if(b){d.prevMonth()}else{d.nextMonth()}}else{if(u>=0.5){if(b){d.nextMonth()}else{d.prevMonth()}}else{d.resetMonth()}}}setTimeout(function(){y=true},100)}function A(L){if(!y){return}var H=a(L.target).parents(".picker-calendar-day");if(H.length===0&&a(L.target).hasClass("picker-calendar-day")){H=a(L.target)}if(H.length===0){return}if(H.hasClass("picker-calendar-day-selected")&&!d.params.multiple){return}if(H.hasClass("picker-calendar-day-disabled")){return}if(H.hasClass("picker-calendar-day-next")){d.nextMonth()}if(H.hasClass("picker-calendar-day-prev")){d.prevMonth()}var I=H.attr("data-year");var J=H.attr("data-month");var K=H.attr("data-day");if(d.params.onDayClick){d.params.onDayClick(d,H[0],I,J,K)}d.addValue(new Date(I,J,K).getTime());if(d.params.closeOnSelect){d.close()}}d.container.find(".picker-calendar-prev-month").on("click",d.prevMonth);d.container.find(".picker-calendar-next-month").on("click",d.nextMonth);d.container.find(".picker-calendar-prev-year").on("click",d.prevYear);d.container.find(".picker-calendar-next-year").on("click",d.nextYear);d.wrapper.on("click",A);if(d.params.touchMove){d.wrapper.on(a.touchEvents.start,r);d.wrapper.on(a.touchEvents.move,t);d.wrapper.on(a.touchEvents.end,w)}d.container[0].f7DestroyCalendarEvents=function(){d.container.find(".picker-calendar-prev-month").off("click",d.prevMonth);d.container.find(".picker-calendar-next-month").off("click",d.nextMonth);d.container.find(".picker-calendar-prev-year").off("click",d.prevYear);d.container.find(".picker-calendar-next-year").off("click",d.nextYear);d.wrapper.off("click",A);if(d.params.touchMove){d.wrapper.off(a.touchEvents.start,r);d.wrapper.off(a.touchEvents.move,t);d.wrapper.off(a.touchEvents.end,w)}}};d.destroyCalendarEvents=function(m){if("f7DestroyCalendarEvents" in d.container[0]){d.container[0].f7DestroyCalendarEvents()}};d.daysInMonth=function(m){var n=new Date(m);return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()};d.monthHTML=function(I,s){I=new Date(I);var z=I.getFullYear(),J=I.getMonth(),F=I.getDate();if(s==="next"){if(J===11){I=new Date(z+1,0)}else{I=new Date(z,J+1,1)}}if(s==="prev"){if(J===0){I=new Date(z-1,11)}else{I=new Date(z,J-1,1)}}if(s==="next"||s==="prev"){J=I.getMonth();z=I.getFullYear()}var A=d.daysInMonth(new Date(I.getFullYear(),I.getMonth()).getTime()-10*24*60*60*1000),m=d.daysInMonth(I),D=new Date(I.getFullYear(),I.getMonth()).getDay();if(D===0){D=7}var C,n=[],G,E,v=6,x=7,K="",B=0+(d.params.firstDay-1),H=new Date().setHours(0,0,0,0),u=d.params.minDate?new Date(d.params.minDate).getTime():null,w=d.params.maxDate?new Date(d.params.maxDate).getTime():null;if(d.value&&d.value.length){for(G=0;G<d.value.length;G++){n.push(new Date(d.value[G]).setHours(0,0,0,0))}}for(G=1;G<=v;G++){var L="";var t=G;for(E=1;E<=x;E++){var q=E;B++;var p=B-D;var y="";if(p<0){p=A+p+1;y+=" picker-calendar-day-prev";C=new Date(J-1<0?z-1:z,J-1<0?11:J-1,p).getTime()}else{p=p+1;if(p>m){p=p-m;y+=" picker-calendar-day-next";C=new Date(J+1>11?z+1:z,J+1>11?0:J+1,p).getTime()}else{C=new Date(z,J,p).getTime()}}if(C===H){y+=" picker-calendar-day-today"}if(n.indexOf(C)>=0){y+=" picker-calendar-day-selected"}if(d.params.weekendDays.indexOf(q-1)>=0){y+=" picker-calendar-day-weekend"}if((u&&C<u)||(w&&C>w)){y+=" picker-calendar-day-disabled"}C=new Date(C);var r=C.getFullYear();var o=C.getMonth();L+='<div data-year="'+r+'" data-month="'+o+'" data-day="'+p+'" class="picker-calendar-day'+(y)+'" data-date="'+(r+"-"+o+"-"+p)+'"><span>'+p+"</span></div>"}K+='<div class="picker-calendar-row">'+L+"</div>"}K='<div class="picker-calendar-month" data-year="'+z+'" data-month="'+J+'">'+K+"</div>";return K};d.animating=false;d.updateCurrentMonthYear=function(m){if(typeof m==="undefined"){d.currentMonth=parseInt(d.months.eq(1).attr("data-month"),10);d.currentYear=parseInt(d.months.eq(1).attr("data-year"),10)}else{d.currentMonth=parseInt(d.months.eq(m==="next"?(d.months.length-1):0).attr("data-month"),10);d.currentYear=parseInt(d.months.eq(m==="next"?(d.months.length-1):0).attr("data-year"),10)}d.container.find(".current-month-value").text(d.params.monthNames[d.currentMonth]);d.container.find(".current-year-value").text(d.currentYear)};d.onMonthChangeStart=function(n){d.updateCurrentMonthYear(n);d.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var m=n==="next"?d.months.length-1:0;d.months.eq(m).addClass("picker-calendar-month-current");d.months.eq(n==="next"?m-1:m+1).addClass(n==="next"?"picker-calendar-month-prev":"picker-calendar-month-next");if(d.params.onMonthYearChangeStart){d.params.onMonthYearChangeStart(d,d.currentYear,d.currentMonth)}};d.onMonthChangeEnd=function(m,q){d.animating=false;var p,n,o;d.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove();if(typeof m==="undefined"){m="next";q=true}if(!q){o=d.monthHTML(new Date(d.currentYear,d.currentMonth),m)}else{d.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove();n=d.monthHTML(new Date(d.currentYear,d.currentMonth),"prev");p=d.monthHTML(new Date(d.currentYear,d.currentMonth),"next")}if(m==="next"||q){d.wrapper.append(o||p)}if(m==="prev"||q){d.wrapper.prepend(o||n)}d.months=d.wrapper.find(".picker-calendar-month");d.setMonthsTranslate(d.monthsTranslate);if(d.params.onMonthAdd){d.params.onMonthAdd(d,m==="next"?d.months.eq(d.months.length-1)[0]:d.months.eq(0)[0])}if(d.params.onMonthYearChangeEnd){d.params.onMonthYearChangeEnd(d,d.currentYear,d.currentMonth)}};d.setMonthsTranslate=function(p){p=p||d.monthsTranslate||0;if(typeof d.monthsTranslate==="undefined"){d.monthsTranslate=p}d.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var n=-(p+1)*100*i;var o=-p*100*i;var m=-(p-1)*100*i;d.months.eq(0).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)").addClass("picker-calendar-month-prev");d.months.eq(1).transform("translate3d("+(d.isH?o:0)+"%, "+(d.isH?0:o)+"%, 0)").addClass("picker-calendar-month-current");d.months.eq(2).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)").addClass("picker-calendar-month-next")};d.nextMonth=function(r){if(typeof r==="undefined"||typeof r==="object"){r="";if(!d.params.animate){r=0}}var q=parseInt(d.months.eq(d.months.length-1).attr("data-month"),10);var s=parseInt(d.months.eq(d.months.length-1).attr("data-year"),10);var o=new Date(s,q);var n=o.getTime();var t=d.animating?false:true;if(d.params.maxDate){if(n>new Date(d.params.maxDate).getTime()){return d.resetMonth()}}d.monthsTranslate--;if(q===d.currentMonth){var u=-(d.monthsTranslate)*100*i;var p=a(d.monthHTML(n,"next")).transform("translate3d("+(d.isH?u:0)+"%, "+(d.isH?0:u)+"%, 0)").addClass("picker-calendar-month-next");d.wrapper.append(p[0]);d.months=d.wrapper.find(".picker-calendar-month");if(d.params.onMonthAdd){d.params.onMonthAdd(d,d.months.eq(d.months.length-1)[0])}}d.animating=true;d.onMonthChangeStart("next");var m=(d.monthsTranslate*100)*i;d.wrapper.transition(r).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)");if(t){d.wrapper.transitionEnd(function(){d.onMonthChangeEnd("next")})}if(!d.params.animate){d.onMonthChangeEnd("next")}};d.prevMonth=function(s){if(typeof s==="undefined"||typeof s==="object"){s="";if(!d.params.animate){s=0}}var o=parseInt(d.months.eq(0).attr("data-month"),10);var r=parseInt(d.months.eq(0).attr("data-year"),10);var m=new Date(r,o+1,-1);var t=m.getTime();var u=d.animating?false:true;if(d.params.minDate){if(t<new Date(d.params.minDate).getTime()){return d.resetMonth()}}d.monthsTranslate++;if(o===d.currentMonth){var p=-(d.monthsTranslate)*100*i;var q=a(d.monthHTML(t,"prev")).transform("translate3d("+(d.isH?p:0)+"%, "+(d.isH?0:p)+"%, 0)").addClass("picker-calendar-month-prev");d.wrapper.prepend(q[0]);d.months=d.wrapper.find(".picker-calendar-month");if(d.params.onMonthAdd){d.params.onMonthAdd(d,d.months.eq(0)[0])}}d.animating=true;d.onMonthChangeStart("prev");var n=(d.monthsTranslate*100)*i;d.wrapper.transition(s).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)");if(u){d.wrapper.transitionEnd(function(){d.onMonthChangeEnd("prev")})}if(!d.params.animate){d.onMonthChangeEnd("prev")}};d.resetMonth=function(n){if(typeof n==="undefined"){n=""}var m=(d.monthsTranslate*100)*i;d.wrapper.transition(n).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)")};d.setYearMonth=function(s,p,r){if(typeof s==="undefined"){s=d.currentYear}if(typeof p==="undefined"){p=d.currentMonth}if(typeof r==="undefined"||typeof r==="object"){r="";if(!d.params.animate){r=0}}var q;if(s<d.currentYear){q=new Date(s,p+1,-1).getTime()}else{q=new Date(s,p).getTime()}if(d.params.maxDate&&q>new Date(d.params.maxDate).getTime()){return false}if(d.params.minDate&&q<new Date(d.params.minDate).getTime()){return false}var m=new Date(d.currentYear,d.currentMonth).getTime();var o=q>m?"next":"prev";var u=d.monthHTML(new Date(s,p));d.monthsTranslate=d.monthsTranslate||0;var w=d.monthsTranslate;var v,n;var t=d.animating?false:true;if(q>m){d.monthsTranslate--;if(!d.animating){d.months.eq(d.months.length-1).remove()}d.wrapper.append(u);d.months=d.wrapper.find(".picker-calendar-month");v=-(w-1)*100*i;d.months.eq(d.months.length-1).transform("translate3d("+(d.isH?v:0)+"%, "+(d.isH?0:v)+"%, 0)").addClass("picker-calendar-month-next")}else{d.monthsTranslate++;if(!d.animating){d.months.eq(0).remove()}d.wrapper.prepend(u);d.months=d.wrapper.find(".picker-calendar-month");v=-(w+1)*100*i;d.months.eq(0).transform("translate3d("+(d.isH?v:0)+"%, "+(d.isH?0:v)+"%, 0)").addClass("picker-calendar-month-prev")}if(d.params.onMonthAdd){d.params.onMonthAdd(d,o==="next"?d.months.eq(d.months.length-1)[0]:d.months.eq(0)[0])}d.animating=true;d.onMonthChangeStart(o);n=(d.monthsTranslate*100)*i;d.wrapper.transition(r).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)");if(t){d.wrapper.transitionEnd(function(){d.onMonthChangeEnd(o,true)})}if(!d.params.animate){d.onMonthChangeEnd(o)}};d.nextYear=function(){d.setYearMonth(d.currentYear+1)};d.prevYear=function(){d.setYearMonth(d.currentYear-1)};d.layout=function(){var n="";var o="";var t;var q=d.value&&d.value.length?d.value[0]:new Date().setHours(0,0,0,0);var v=d.monthHTML(q,"prev");var s=d.monthHTML(q);var r=d.monthHTML(q,"next");var p='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(v+s+r)+"</div></div>";var u="";if(d.params.weekHeader){for(t=0;t<7;t++){var w=(t+d.params.firstDay>6)?(t-7+d.params.firstDay):(t+d.params.firstDay);var x=d.params.dayNamesShort[w];u+='<div class="picker-calendar-week-day '+((d.params.weekendDays.indexOf(w)>=0)?"picker-calendar-week-day-weekend":"")+'"> '+x+"</div>"}u='<div class="picker-calendar-week-days">'+u+"</div>"}o="picker-modal picker-calendar "+(d.params.cssClass||"");var m=d.params.toolbar?d.params.toolbarTemplate.replace(/{{closeText}}/g,d.params.toolbarCloseText):"";if(d.params.toolbar){m=d.params.toolbarTemplate.replace(/{{closeText}}/g,d.params.toolbarCloseText).replace(/{{monthPicker}}/g,(d.params.monthPicker?d.params.monthPickerTemplate:"")).replace(/{{yearPicker}}/g,(d.params.yearPicker?d.params.yearPickerTemplate:""))}n='<div class="'+(o)+'">'+m+'<div class="picker-modal-inner">'+u+p+"</div></div>";d.pickerHTML=n};function e(s){s.preventDefault();if(a.device.isWeixin&&a.device.android&&d.params.inputReadOnly){this.focus();this.blur()}if(d.opened){return}d.open();if(d.params.scrollToInput){var m=d.input.parents(".content");if(m.length===0){return}var u=parseInt(m.css("padding-top"),10),p=parseInt(m.css("padding-bottom"),10),q=m[0].offsetHeight-u-d.container.height(),n=m[0].scrollHeight-u-d.container.height(),r;var t=d.input.offset().top-u+d.input[0].offsetHeight;if(t>q){var o=m.scrollTop()+t-q;if(o+q>n){r=o+q-n+p;if(q===n){r=d.container.height()}m.css({"padding-bottom":(r)+"px"})}m.scrollTop(o,300)}}}function l(m){if(d.input&&d.input.length>0){if(m.target!==d.input[0]&&a(m.target).parents(".picker-modal").length===0){d.close()}}else{if(a(m.target).parents(".picker-modal").length===0){d.close()}}}if(d.params.input){d.input=a(d.params.input);if(d.input.length>0){if(d.params.inputReadOnly){d.input.prop("readOnly",true)}if(!d.inline){d.input.on("click",e)}}}if(!d.inline){a("html").on("click",l)}function j(){d.opened=false;if(d.input&&d.input.length>0){d.input.parents(".content").css({"padding-bottom":""})}if(d.params.onClose){d.params.onClose(d)}d.destroyCalendarEvents()}d.opened=false;d.open=function(){var m=false;if(!d.opened){if(!d.value){if(d.params.value){d.value=d.params.value;m=true}}d.layout();if(d.inline){d.container=a(d.pickerHTML);d.container.addClass("picker-modal-inline");a(d.params.container).append(d.container)}else{d.container=a(a.pickerModal(d.pickerHTML));a(d.container).on("close",function(){j()})}d.container[0].f7Calendar=d;d.wrapper=d.container.find(".picker-calendar-months-wrapper");d.months=d.wrapper.find(".picker-calendar-month");d.updateCurrentMonthYear();d.monthsTranslate=0;d.setMonthsTranslate();d.initCalendarEvents();if(m){d.updateValue()}}d.opened=true;d.initialized=true;if(d.params.onMonthAdd){d.months.each(function(){d.params.onMonthAdd(d,this)})}if(d.params.onOpen){d.params.onOpen(d)}};d.close=function(){if(!d.opened||d.inline){return}a.closeModal(d.container);return};d.destroy=function(){d.close();if(d.params.input&&d.input.length>0){d.input.off("click",e)}a("html").off("click",l)};if(d.inline){d.open()}return d};a.fn.calendar=function(d){return this.each(function(){var f=a(this);if(!f[0]){return}var e={};if(f[0].tagName.toUpperCase()==="INPUT"){e.input=f}else{e.container=f}new c(a.extend(e,d))})};a.initCalendar=function(e){var d=e?a(e):a(document.body);d.find("[data-toggle='date']").each(function(){a(this).calendar()})}}(Zepto);+function(b){var a=function(f){var c=this;var g={updateValuesOnMomentum:false,updateValuesOnTouchmove:true,rotateEffect:false,momentumRatio:7,freeMode:false,scrollToInput:true,inputReadOnly:true,toolbar:true,toolbarCloseText:"确定",toolbarTemplate:'<header class="bar bar-nav">                <button class="button button-link pull-right close-picker">确定</button>                <h1 class="title">请选择</h1>                </header>'};f=f||{};for(var e in g){if(typeof f[e]==="undefined"){f[e]=g[e]}}c.params=f;c.cols=[];c.initialized=false;c.inline=c.params.container?true:false;var h=b.device.ios||(navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0)&&!b.device.android;c.setValue=function(m,o){var n=0;for(var l=0;l<c.cols.length;l++){if(c.cols[l]&&!c.cols[l].divider){c.cols[l].setValue(m[n],o);n++}}};c.updateValue=function(){var n=[];var l=[];for(var m=0;m<c.cols.length;m++){if(!c.cols[m].divider){n.push(c.cols[m].value);l.push(c.cols[m].displayValue)}}if(n.indexOf(undefined)>=0){return}c.value=n;c.displayValue=l;if(c.params.onChange){c.params.onChange(c,c.value,c.displayValue)}if(c.input&&c.input.length>0){b(c.input).val(c.params.formatValue?c.params.formatValue(c,c.value,c.displayValue):c.value.join(" "));b(c.input).trigger("change")}};c.initPickerCol=function(y,w){var C=b(y);var B=C.index();var n=c.cols[B];if(n.divider){return}n.container=C;n.wrapper=n.container.find(".picker-items-col-wrapper");n.items=n.wrapper.find(".picker-item");var J,G;var F,E,p,Q,m;n.replaceValues=function(R,S){n.destroyEvents();n.values=R;n.displayValues=S;var T=c.columnHTML(n,true);n.wrapper.html(T);n.items=n.wrapper.find(".picker-item");n.calcSize();n.setValue(n.values[0],0,true);n.initEvents()};n.calcSize=function(){if(c.params.rotateEffect){n.container.removeClass("picker-items-col-absolute");if(!n.width){n.container.css({width:""})}}var R,S;R=0;S=n.container[0].offsetHeight;F=n.wrapper[0].offsetHeight;E=n.items[0].offsetHeight;p=E*n.items.length;Q=S/2-p+E/2;m=S/2-E/2;if(n.width){R=n.width;if(parseInt(R,10)===R){R=R+"px"}n.container.css({width:R})}if(c.params.rotateEffect){if(!n.width){n.items.each(function(){var T=b(this);T.css({width:"auto"});R=Math.max(R,T[0].offsetWidth);T.css({width:""})});n.container.css({width:(R+2)+"px"})}n.container.addClass("picker-items-col-absolute")}};n.calcSize();n.wrapper.transform("translate3d(0,"+m+"px,0)").transition(0);var I=0;var t;n.setValue=function(T,U,R){if(typeof U==="undefined"){U=""}var V=n.wrapper.find('.picker-item[data-picker-value="'+T+'"]').index();if(typeof V==="undefined"||V===-1){return}var S=-V*E+m;n.wrapper.transition(U);n.wrapper.transform("translate3d(0,"+(S)+"px,0)");if(c.params.updateValuesOnMomentum&&n.activeIndex&&n.activeIndex!==V){b.cancelAnimationFrame(t);n.wrapper.transitionEnd(function(){b.cancelAnimationFrame(t)});s()}n.updateItems(V,S,U,R)};n.updateItems=function(R,X,W,T){if(typeof X==="undefined"){X=b.getTranslate(n.wrapper[0],"y")}if(typeof R==="undefined"){R=-Math.round((X-m)/E)}if(R<0){R=0}if(R>=n.items.length){R=n.items.length-1}var U=n.activeIndex;n.activeIndex=R;n.wrapper.find(".picker-selected").removeClass("picker-selected");if(c.params.rotateEffect){n.items.transition(W)}var V=n.items.eq(R).addClass("picker-selected").transform("");if(T||typeof T==="undefined"){n.value=V.attr("data-picker-value");n.displayValue=n.displayValues?n.displayValues[R]:n.value;if(U!==R){if(n.onChange){n.onChange(c,n.value,n.displayValue)}c.updateValue()}}if(!c.params.rotateEffect){return}var S=(X-(Math.floor((X-m)/E)*E+m))/E;n.items.each(function(){var ab=b(this);var ad=ab.index()*E;var Z=m-X;var ac=ad-Z;var Y=ac/E;var aa=Math.ceil(n.height/E/2)+1;var ae=(-18*Y);if(ae>180){ae=180}if(ae<-180){ae=-180}if(Math.abs(Y)>aa){ab.addClass("picker-item-far")}else{ab.removeClass("picker-item-far")}ab.transform("translate3d(0, "+(-X+m)+"px, "+(h?-110:0)+"px) rotateX("+ae+"deg)")})};function s(){t=b.requestAnimationFrame(function(){n.updateItems(undefined,undefined,0);s()})}if(w){n.updateItems(0,m,0)}var D=true;var K,v,N,o,q,M,O,P,z,H,l,L;function u(R){if(v||K){return}R.preventDefault();K=true;N=o=R.type==="touchstart"?R.targetTouches[0].pageY:R.pageY;q=(new Date()).getTime();D=true;O=z=b.getTranslate(n.wrapper[0],"y")}function x(S){if(!K){return}S.preventDefault();D=false;o=S.type==="touchmove"?S.targetTouches[0].pageY:S.pageY;if(!v){b.cancelAnimationFrame(t);v=true;O=z=b.getTranslate(n.wrapper[0],"y");n.wrapper.transition(0)}S.preventDefault();var R=o-N;z=O+R;P=undefined;if(z<Q){z=Q-Math.pow(Q-z,0.8);P="min"}if(z>m){z=m+Math.pow(z-m,0.8);P="max"}n.wrapper.transform("translate3d(0,"+z+"px,0)");n.updateItems(undefined,z,0,c.params.updateValuesOnTouchmove);l=z-H||z;L=(new Date()).getTime();H=z}function A(U){if(!K||!v){K=v=false;return}K=v=false;n.wrapper.transition("");if(P){if(P==="min"){n.wrapper.transform("translate3d(0,"+Q+"px,0)")}else{n.wrapper.transform("translate3d(0,"+m+"px,0)")}}M=new Date().getTime();var T,S;if(M-q>300){S=z}else{T=Math.abs(l/(M-L));S=z+l*c.params.momentumRatio}S=Math.max(Math.min(S,m),Q);var R=-Math.floor((S-m)/E);if(!c.params.freeMode){S=-R*E+m}n.wrapper.transform("translate3d(0,"+(parseInt(S,10))+"px,0)");n.updateItems(R,S,"",true);if(c.params.updateValuesOnMomentum){s();n.wrapper.transitionEnd(function(){b.cancelAnimationFrame(t)})}setTimeout(function(){D=true},100)}function r(S){if(!D){return}b.cancelAnimationFrame(t);var R=b(this).attr("data-picker-value");n.setValue(R)}n.initEvents=function(R){var S=R?"off":"on";n.container[S](b.touchEvents.start,u);n.container[S](b.touchEvents.move,x);n.container[S](b.touchEvents.end,A);n.items[S]("click",r)};n.destroyEvents=function(){n.initEvents(true)};n.container[0].f7DestroyPickerCol=function(){n.destroyEvents()};n.initEvents()};c.destroyPickerCol=function(l){l=b(l);if("f7DestroyPickerCol" in l[0]){l[0].f7DestroyPickerCol()}};function i(){if(!c.opened){return}for(var l=0;l<c.cols.length;l++){if(!c.cols[l].divider){c.cols[l].calcSize();c.cols[l].setValue(c.cols[l].value,0,false)}}}b(window).on("resize",i);c.columnHTML=function(p,m){var n="";var l="";if(p.divider){l+='<div class="picker-items-col picker-items-col-divider '+(p.textAlign?"picker-items-col-"+p.textAlign:"")+" "+(p.cssClass||"")+'">'+p.content+"</div>"}else{for(var o=0;o<p.values.length;o++){n+='<div class="picker-item" data-picker-value="'+p.values[o]+'">'+(p.displayValues?p.displayValues[o]:p.values[o])+"</div>"}l+='<div class="picker-items-col '+(p.textAlign?"picker-items-col-"+p.textAlign:"")+" "+(p.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return m?n:l};c.layout=function(){var p="";var o="";var n;c.cols=[];var l="";for(n=0;n<c.params.cols.length;n++){var m=c.params.cols[n];l+=c.columnHTML(c.params.cols[n]);c.cols.push(m)}o="picker-modal picker-columns "+(c.params.cssClass||"")+(c.params.rotateEffect?" picker-3d":"");p='<div class="'+(o)+'">'+(c.params.toolbar?c.params.toolbarTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+l+'<div class="picker-center-highlight"></div></div></div>';c.pickerHTML=p};function d(r){r.preventDefault();if(b.device.isWeixin&&b.device.android&&c.params.inputReadOnly){this.focus();this.blur()}if(c.opened){return}c.open();if(c.params.scrollToInput){var l=c.input.parents(".content");if(l.length===0){return}var t=parseInt(l.css("padding-top"),10),o=parseInt(l.css("padding-bottom"),10),p=l[0].offsetHeight-t-c.container.height(),m=l[0].scrollHeight-t-c.container.height(),q;var s=c.input.offset().top-t+c.input[0].offsetHeight;if(s>p){var n=l.scrollTop()+s-p;if(n+p>m){q=n+p-m+o;if(p===m){q=c.container.height()}l.css({"padding-bottom":(q)+"px"})}l.scrollTop(n,300)}}}function k(l){if(!c.opened){return}if(c.input&&c.input.length>0){if(l.target!==c.input[0]&&b(l.target).parents(".picker-modal").length===0){c.close()}}else{if(b(l.target).parents(".picker-modal").length===0){c.close()}}}if(c.params.input){c.input=b(c.params.input);if(c.input.length>0){if(c.params.inputReadOnly){c.input.prop("readOnly",true)}if(!c.inline){c.input.on("click",d)}}}if(!c.inline){b("html").on("click",k)}function j(){c.opened=false;if(c.input&&c.input.length>0){c.input.parents(".content").css({"padding-bottom":""})}if(c.params.onClose){c.params.onClose(c)}c.container.find(".picker-items-col").each(function(){c.destroyPickerCol(this)})}c.opened=false;c.open=function(){if(!c.opened){c.layout();if(c.inline){c.container=b(c.pickerHTML);c.container.addClass("picker-modal-inline");b(c.params.container).append(c.container);c.opened=true}else{c.container=b(b.pickerModal(c.pickerHTML));b(c.container).one("opened",function(){c.opened=true}).on("close",function(){j()})}c.container[0].f7Picker=c;c.container.find(".picker-items-col").each(function(){var l=true;if((!c.initialized&&c.params.value)||(c.initialized&&c.value)){l=false}c.initPickerCol(this,l)});if(!c.initialized){if(c.params.value){c.setValue(c.params.value,0)}}else{if(c.value){c.setValue(c.value,0)}}}c.initialized=true;if(c.params.onOpen){c.params.onOpen(c)}};c.close=function(){if(!c.opened||c.inline){return}b.closeModal(c.container);return};c.destroy=function(){c.close();if(c.params.input&&c.input.length>0){c.input.off("click",d)}b("html").off("click",k);b(window).off("resize",i)};if(c.inline){c.open()}return c};b(document).on("click",".close-picker",function(){var c=b(".picker-modal.modal-in");b.closeModal(c)});b.fn.picker=function(d){var c=arguments;return this.each(function(){if(!this){return}var g=b(this);var e=g.data("picker");if(!e){var f=b.extend({input:this,value:g.val()?g.val().split(" "):""},d);e=new a(f);g.data("picker",e)}if(typeof d===typeof"a"){e[d].apply(e,Array.prototype.slice.call(c,1))}})}}(Zepto);+function(f){var b=new Date();var d=function(j){var l=[];for(var k=1;k<=(j||31);k++){l.push(k<10?"0"+k:k)}return l};var e=function(k,j){var i=new Date(j,parseInt(k)+1-1,1);var l=new Date(i-1);return d(l.getDate())};var c=function(i){return i<10?"0"+i:i};var h=("01 02 03 04 05 06 07 08 09 10 11 12").split(" ");var a=(function(){var j=[];for(var k=1950;k<=2030;k++){j.push(k)}return j})();var g={rotateEffect:false,value:[b.getFullYear(),c(b.getMonth()+1),c(b.getDate()),b.getHours(),c(b.getMinutes())],onChange:function(j,i,l){var m=e(j.cols[1].value,j.cols[0].value);var k=j.cols[2].value;if(k>m.length){k=m.length}j.cols[2].setValue(k)},formatValue:function(k,i,j){return j[0]+"-"+i[1]+"-"+i[2]+" "+i[3]+":"+i[4]},cols:[{values:a},{values:h},{values:d()},{divider:true,content:"  "},{values:(function(){var j=[];for(var k=0;k<=23;k++){j.push(k)}return j})()},{divider:true,content:":"},{values:(function(){var j=[];for(var k=0;k<=59;k++){j.push(k<10?"0"+k:k)}return j})()}]};f.fn.datetimePicker=function(i){return this.each(function(){if(!this){return}var j=f.extend(g,i);f(this).picker(j);if(i.value){f(this).val(j.formatValue(j,j.value,j.value))}})}}(Zepto);+function(d){var f=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(g){d.setTimeout(g,1000/60)};var b=(function(){var k={};var l=document.createElement("div").style;var i=(function(){var p=["t","webkitT","MozT","msT","OT"],n,o=0,m=p.length;for(;o<m;o++){n=p[o]+"ransform";if(n in l){return p[o].substr(0,p[o].length-1)}}return false})();function j(m){if(i===false){return false}if(i===""){return m}return i+m.charAt(0).toUpperCase()+m.substr(1)}k.getTime=Date.now||function g(){return new Date().getTime()};k.extend=function(o,n){for(var m in n){o[m]=n[m]}};k.addEvent=function(p,o,n,m){p.addEventListener(o,n,!!m)};k.removeEvent=function(p,o,n,m){p.removeEventListener(o,n,!!m)};k.prefixPointerEvent=function(m){return d.MSPointerEvent?"MSPointer"+m.charAt(9).toUpperCase()+m.substr(10):m};k.momentum=function(v,o,q,m,w,x,A){var n=v-o,p=Math.abs(n)/q,y,s;p=p/2;p=p>1.5?1.5:p;x=x===undefined?0.0006:x;y=v+(p*p)/(2*x)*(n<0?-1:1);s=p/x;if(y<m){y=w?m-(w/2.5*(p/8)):m;n=Math.abs(y-v);s=n/p}else{if(y>0){y=w?w/2.5*(p/8):0;n=Math.abs(v)+y;s=n/p}}var z=+new Date();var r=z;function u(){if(+new Date()-r>50){A._execEvent("scroll");r=+new Date()}if(+new Date()-z<s){f(u)}}f(u);return{destination:Math.round(y),duration:s}};var h=j("transform");k.extend(k,{hasTransform:h!==false,hasPerspective:j("perspective") in l,hasTouch:"ontouchstart" in d,hasPointer:d.PointerEvent||d.MSPointerEvent,hasTransition:j("transition") in l});k.isBadAndroid=/Android /.test(d.navigator.appVersion)&&!(/Chrome\/\d/.test(d.navigator.appVersion))&&false;k.extend(k.style={},{transform:h,transitionTimingFunction:j("transitionTimingFunction"),transitionDuration:j("transitionDuration"),transitionDelay:j("transitionDelay"),transformOrigin:j("transformOrigin")});k.hasClass=function(n,o){var m=new RegExp("(^|\\s)"+o+"(\\s|$)");return m.test(n.className)};k.addClass=function(n,o){if(k.hasClass(n,o)){return}var m=n.className.split(" ");m.push(o);n.className=m.join(" ")};k.removeClass=function(n,o){if(!k.hasClass(n,o)){return}var m=new RegExp("(^|\\s)"+o+"(\\s|$)","g");n.className=n.className.replace(m," ")};k.offset=function(m){var o=-m.offsetLeft,n=-m.offsetTop;while(m=m.offsetParent){o-=m.offsetLeft;n-=m.offsetTop}return{left:o,top:n}};k.preventDefaultException=function(o,n){for(var m in n){if(n[m].test(o[m])){return true}}return false};k.extend(k.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});k.extend(k.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(m){return m*(2-m)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(m){return Math.sqrt(1-(--m*m))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(n){var m=4;return(n=n-1)*n*((m+1)*n+m)+1}},bounce:{style:"",fn:function(m){if((m/=1)<(1/2.75)){return 7.5625*m*m}else{if(m<(2/2.75)){return 7.5625*(m-=(1.5/2.75))*m+0.75}else{if(m<(2.5/2.75)){return 7.5625*(m-=(2.25/2.75))*m+0.9375}else{return 7.5625*(m-=(2.625/2.75))*m+0.984375}}}}},elastic:{style:"",fn:function(m){var n=0.22,o=0.4;if(m===0){return 0}if(m===1){return 1}return(o*Math.pow(2,-10*m)*Math.sin((m-n/4)*(2*Math.PI)/n)+1)}}});k.tap=function(o,m){var n=document.createEvent("Event");n.initEvent(m,true,true);n.pageX=o.pageX;n.pageY=o.pageY;o.target.dispatchEvent(n)};k.click=function(o){var n=o.target,m;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(n.tagName)){m=document.createEvent("MouseEvents");m.initMouseEvent("click",true,true,o.view,1,n.screenX,n.screenY,n.clientX,n.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null);m._constructed=true;n.dispatchEvent(m)}};return k})();function e(j,g){this.wrapper=typeof j==="string"?document.querySelector(j):j;this.scroller=$(this.wrapper).find(".content-inner")[0];this.scrollerStyle=this.scroller&&this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true,eventPassthrough:undefined};for(var h in g){this.options[h]=g[h]}this.translateZ=this.options.HWCompositing&&b.hasPerspective?" translateZ(0)":"";this.options.useTransition=b.hasTransition&&this.options.useTransition;this.options.useTransform=b.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough==="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough==="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing==="string"?b.ease[this.options.bounceEasing]||b.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars==="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;if(this.options.probeType===3){this.options.useTransition=false}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}e.prototype={version:"5.1.3",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(g){if(g.target!==this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(h){if(b.eventType[h.type]!==1){if(h.button!==0){return}}if(!this.enabled||(this.initiated&&b.eventType[h.type]!==this.initiated)){return}if(this.options.preventDefault&&!b.isBadAndroid&&!b.preventDefaultException(h.target,this.options.preventDefaultException)){h.preventDefault()}var g=h.touches?h.touches[0]:h,i;this.initiated=b.eventType[h.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=b.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;i=this.getComputedPosition();this._translate(Math.round(i.x),Math.round(i.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=g.pageX;this.pointY=g.pageY;this._execEvent("beforeScrollStart")},_move:function(l){if(!this.enabled||b.eventType[l.type]!==this.initiated){return}if(this.options.preventDefault){l.preventDefault()}var n=l.touches?l.touches[0]:l,i=n.pageX-this.pointX,h=n.pageY-this.pointY,m=b.getTime(),g,o,k,j;this.pointX=n.pageX;this.pointY=n.pageY;this.distX+=i;this.distY+=h;k=Math.abs(this.distX);j=Math.abs(this.distY);if(m-this.endTime>300&&(k<10&&j<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(k>j+this.options.directionLockThreshold){this.directionLocked="h"}else{if(j>=k+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked==="h"){if(this.options.eventPassthrough==="vertical"){l.preventDefault()}else{if(this.options.eventPassthrough==="horizontal"){this.initiated=false;return}}h=0}else{if(this.directionLocked==="v"){if(this.options.eventPassthrough==="horizontal"){l.preventDefault()}else{if(this.options.eventPassthrough==="vertical"){this.initiated=false;return}}i=0}}i=this.hasHorizontalScroll?i:0;h=this.hasVerticalScroll?h:0;g=this.x+i;o=this.y+h;if(g>0||g<this.maxScrollX){g=this.options.bounce?this.x+i/3:g>0?0:this.maxScrollX}if(o>0||o<this.maxScrollY){o=this.options.bounce?this.y+h/3:o>0?0:this.maxScrollY}this.directionX=i>0?-1:i<0?1:0;this.directionY=h>0?-1:h<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(g,o);if(m-this.startTime>300){this.startTime=m;this.startX=this.x;this.startY=this.y;if(this.options.probeType===1){this._execEvent("scroll")}}if(this.options.probeType>1){this._execEvent("scroll")}},_end:function(m){if(!this.enabled||b.eventType[m.type]!==this.initiated){return}if(this.options.preventDefault&&!b.preventDefaultException(m.target,this.options.preventDefaultException)){m.preventDefault()}var i,h,l=b.getTime()-this.startTime,g=Math.round(this.x),q=Math.round(this.y),p=Math.abs(g-this.startX),o=Math.abs(q-this.startY),j=0,n="";this.isInTransition=0;this.initiated=0;this.endTime=b.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(g,q);if(!this.moved){if(this.options.tap){b.tap(m,this.options.tap)}if(this.options.click){b.click(m)}this._execEvent("scrollCancel");return}if(this._events.flick&&l<200&&p<100&&o<100){this._execEvent("flick");return}if(this.options.momentum&&l<300){i=this.hasHorizontalScroll?b.momentum(this.x,this.startX,l,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration,this):{destination:g,duration:0};h=this.hasVerticalScroll?b.momentum(this.y,this.startY,l,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration,this):{destination:q,duration:0};g=i.destination;q=h.destination;j=Math.max(i.duration,h.duration);this.isInTransition=1}if(this.options.snap){var k=this._nearestSnap(g,q);this.currentPage=k;j=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(g-k.x),1000),Math.min(Math.abs(q-k.y),1000)),300);g=k.x;q=k.y;this.directionX=0;this.directionY=0;n=this.options.bounceEasing}if(g!==this.x||q!==this.y){if(g>0||g<this.maxScrollX||q>0||q<this.maxScrollY){n=b.ease.quadratic}this.scrollTo(g,q,j,n);return}this._execEvent("scrollEnd")},_resize:function(){var g=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){g.refresh()},this.options.resizePolling)},resetPosition:function(i){var g=this.x,j=this.y;i=i||0;if(!this.hasHorizontalScroll||this.x>0){g=0}else{if(this.x<this.maxScrollX){g=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){j=0}else{if(this.y<this.maxScrollY){j=this.maxScrollY}}if(g===this.x&&j===this.y){return false}if(this.options.ptr&&this.y>44&&this.startY*-1<$(d).height()&&!this.ptrLock){j=this.options.ptrOffset||44;this._execEvent("ptr");this.ptrLock=true;var h=this;setTimeout(function(){h.ptrLock=false},500)}this.scrollTo(g,j,i,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=b.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(h,g){if(!this._events[h]){this._events[h]=[]}this._events[h].push(g)},off:function(i,h){if(!this._events[i]){return}var g=this._events[i].indexOf(h);if(g>-1){this._events[i].splice(g,1)}},_execEvent:function(j){if(!this._events[j]){return}var h=0,g=this._events[j].length;if(!g){return}for(;h<g;h++){this._events[j][h].apply(this,[].slice.call(arguments,1))}},scrollBy:function(g,j,h,i){g=this.x+g;j=this.y+j;h=h||0;this.scrollTo(g,j,h,i)},scrollTo:function(g,j,h,i){i=i||b.ease.circular;this.isInTransition=this.options.useTransition&&h>0;if(!h||(this.options.useTransition&&i.style)){this._transitionTimingFunction(i.style);this._transitionTime(h);this._translate(g,j)}else{this._animate(g,j,h,i.fn)}},scrollToElement:function(h,i,g,l,k){h=h.nodeType?h:this.scroller.querySelector(h);if(!h){return}var j=b.offset(h);j.left-=this.wrapperOffset.left;j.top-=this.wrapperOffset.top;if(g===true){g=Math.round(h.offsetWidth/2-this.wrapper.offsetWidth/2)}if(l===true){l=Math.round(h.offsetHeight/2-this.wrapper.offsetHeight/2)}j.left-=g||0;j.top-=l||0;j.left=j.left>0?0:j.left<this.maxScrollX?this.maxScrollX:j.left;j.top=j.top>0?0:j.top<this.maxScrollY?this.maxScrollY:j.top;i=i===undefined||i===null||i==="auto"?Math.max(Math.abs(this.x-j.left),Math.abs(this.y-j.top)):i;this.scrollTo(j.left,j.top,i,k)},_transitionTime:function(h){h=h||0;this.scrollerStyle[b.style.transitionDuration]=h+"ms";if(!h&&b.isBadAndroid){this.scrollerStyle[b.style.transitionDuration]="0.001s"}if(this.indicators){for(var g=this.indicators.length;g--;){this.indicators[g].transitionTime(h)}}},_transitionTimingFunction:function(h){this.scrollerStyle[b.style.transitionTimingFunction]=h;if(this.indicators){for(var g=this.indicators.length;g--;){this.indicators[g].transitionTimingFunction(h)}}},_translate:function(g,j){if(this.options.useTransform){this.scrollerStyle[b.style.transform]="translate("+g+"px,"+j+"px)"+this.translateZ}else{g=Math.round(g);j=Math.round(j);this.scrollerStyle.left=g+"px";this.scrollerStyle.top=j+"px"}this.x=g;this.y=j;if(this.indicators){for(var h=this.indicators.length;h--;){this.indicators[h].updatePosition()}}},_initEvents:function(g){var h=g?b.removeEvent:b.addEvent,i=this.options.bindToWrapper?this.wrapper:d;h(d,"orientationchange",this);h(d,"resize",this);if(this.options.click){h(this.wrapper,"click",this,true)}if(!this.options.disableMouse){h(this.wrapper,"mousedown",this);h(i,"mousemove",this);h(i,"mousecancel",this);h(i,"mouseup",this)}if(b.hasPointer&&!this.options.disablePointer){h(this.wrapper,b.prefixPointerEvent("pointerdown"),this);h(i,b.prefixPointerEvent("pointermove"),this);h(i,b.prefixPointerEvent("pointercancel"),this);h(i,b.prefixPointerEvent("pointerup"),this)}if(b.hasTouch&&!this.options.disableTouch){h(this.wrapper,"touchstart",this);h(i,"touchmove",this);h(i,"touchcancel",this);h(i,"touchend",this)}h(this.scroller,"transitionend",this);h(this.scroller,"webkitTransitionEnd",this);h(this.scroller,"oTransitionEnd",this);h(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var h=d.getComputedStyle(this.scroller,null),g,i;if(this.options.useTransform){h=h[b.style.transform].split(")")[0].split(", ");g=+(h[12]||h[4]);i=+(h[13]||h[5])}else{g=+h.left.replace(/[^-\d.]/g,"");i=+h.top.replace(/[^-\d.]/g,"")}return{x:g,y:i}},_initIndicators:function(){var j=this.options.interactiveScrollbars,l=typeof this.options.scrollbars!=="string",n=[],h;var m=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){h={el:c("v",j,this.options.scrollbars),interactive:j,defaultScrollbars:true,customStyle:l,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(h.el);n.push(h)}if(this.options.scrollX){h={el:c("h",j,this.options.scrollbars),interactive:j,defaultScrollbars:true,customStyle:l,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(h.el);n.push(h)}}if(this.options.indicators){n=n.concat(this.options.indicators)}for(var k=n.length;k--;){this.indicators.push(new a(this,n[k]))}function g(p){for(var o=m.indicators.length;o--;){p.call(m.indicators[o])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){g(function(){this.fade()})});this.on("scrollCancel",function(){g(function(){this.fade()})});this.on("scrollStart",function(){g(function(){this.fade(1)})});this.on("beforeScrollStart",function(){g(function(){this.fade(1,true)})})}this.on("refresh",function(){g(function(){this.refresh()})});this.on("destroy",function(){g(function(){this.destroy()});delete this.indicators})},_initWheel:function(){b.addEvent(this.wrapper,"wheel",this);b.addEvent(this.wrapper,"mousewheel",this);b.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){b.removeEvent(this.wrapper,"wheel",this);b.removeEvent(this.wrapper,"mousewheel",this);b.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(k){if(!this.enabled){return}k.preventDefault();k.stopPropagation();var i,h,l,j,g=this;if(this.wheelTimeout===undefined){g._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){g._execEvent("scrollEnd");g.wheelTimeout=undefined},400);if("deltaX" in k){if(k.deltaMode===1){i=-k.deltaX*this.options.mouseWheelSpeed;h=-k.deltaY*this.options.mouseWheelSpeed}else{i=-k.deltaX;h=-k.deltaY}}else{if("wheelDeltaX" in k){i=k.wheelDeltaX/120*this.options.mouseWheelSpeed;h=k.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in k){i=h=k.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in k){i=h=-k.detail/3*this.options.mouseWheelSpeed}else{return}}}}i*=this.options.invertWheelDirection;h*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){i=h;h=0}if(this.options.snap){l=this.currentPage.pageX;j=this.currentPage.pageY;if(i>0){l--}else{if(i<0){l++}}if(h>0){j--}else{if(h<0){j++}}this.goToPage(l,j);return}l=this.x+Math.round(this.hasHorizontalScroll?i:0);j=this.y+Math.round(this.hasVerticalScroll?h:0);if(l>0){l=0}else{if(l<this.maxScrollX){l=this.maxScrollX}}if(j>0){j=0}else{if(j<this.maxScrollY){j=this.maxScrollY}}this.scrollTo(l,j,0);this._execEvent("scroll")},_initSnap:function(){this.currentPage={};if(typeof this.options.snap==="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var q=0,o,j=0,h,p,k,s=0,r,u=this.options.snapStepX||this.wrapperWidth,t=this.options.snapStepY||this.wrapperHeight,g;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){p=Math.round(u/2);k=Math.round(t/2);while(s>-this.scrollerWidth){this.pages[q]=[];o=0;r=0;while(r>-this.scrollerHeight){this.pages[q][o]={x:Math.max(s,this.maxScrollX),y:Math.max(r,this.maxScrollY),width:u,height:t,cx:s-p,cy:r-k};r-=t;o++}s-=u;q++}}else{g=this.options.snap;o=g.length;h=-1;for(;q<o;q++){if(q===0||g[q].offsetLeft<=g[q-1].offsetLeft){j=0;h++}if(!this.pages[j]){this.pages[j]=[]}s=Math.max(-g[q].offsetLeft,this.maxScrollX);r=Math.max(-g[q].offsetTop,this.maxScrollY);p=s-Math.round(g[q].offsetWidth/2);k=r-Math.round(g[q].offsetHeight/2);this.pages[j][h]={x:s,y:r,width:g[q].offsetWidth,height:g[q].offsetHeight,cx:p,cy:k};if(s>this.maxScrollX){j++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var g=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.x-this.startX),1000),Math.min(Math.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,g)})},_nearestSnap:function(h,n){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var k=0,j=this.pages.length,g=0;if(Math.abs(h-this.absStartX)<this.snapThresholdX&&Math.abs(n-this.absStartY)<this.snapThresholdY){return this.currentPage}if(h>0){h=0}else{if(h<this.maxScrollX){h=this.maxScrollX}}if(n>0){n=0}else{if(n<this.maxScrollY){n=this.maxScrollY}}for(;k<j;k++){if(h>=this.pages[k][0].cx){h=this.pages[k][0].x;break}}j=this.pages[k].length;for(;g<j;g++){if(n>=this.pages[0][g].cy){n=this.pages[0][g].y;break}}if(k===this.currentPage.pageX){k+=this.directionX;if(k<0){k=0}else{if(k>=this.pages.length){k=this.pages.length-1}}h=this.pages[k][0].x}if(g===this.currentPage.pageY){g+=this.directionY;if(g<0){g=0}else{if(g>=this.pages[0].length){g=this.pages[0].length-1}}n=this.pages[0][g].y}return{x:h,y:n,pageX:k,pageY:g}},goToPage:function(g,l,h,k){k=k||this.options.bounceEasing;if(g>=this.pages.length){g=this.pages.length-1}else{if(g<0){g=0}}if(l>=this.pages[g].length){l=this.pages[g].length-1}else{if(l<0){l=0}}var j=this.pages[g][l].x,i=this.pages[g][l].y;h=h===undefined?this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(j-this.x),1000),Math.min(Math.abs(i-this.y),1000)),300):h;this.currentPage={x:j,y:i,pageX:g,pageY:l};this.scrollTo(j,i,h,k)},next:function(h,j){var g=this.currentPage.pageX,i=this.currentPage.pageY;g++;if(g>=this.pages.length&&this.hasVerticalScroll){g=0;i++}this.goToPage(g,i,h,j)},prev:function(h,j){var g=this.currentPage.pageX,i=this.currentPage.pageY;g--;if(g<0&&this.hasVerticalScroll){g=0;i--}this.goToPage(g,i,h,j)},_initKeys:function(){var h={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var g;if(typeof this.options.keyBindings==="object"){for(g in this.options.keyBindings){if(typeof this.options.keyBindings[g]==="string"){this.options.keyBindings[g]=this.options.keyBindings[g].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(g in h){this.options.keyBindings[g]=this.options.keyBindings[g]||h[g]}b.addEvent(d,"keydown",this);this.on("destroy",function(){b.removeEvent(d,"keydown",this)})},_key:function(l){if(!this.enabled){return}var g=this.options.snap,m=g?this.currentPage.pageX:this.x,k=g?this.currentPage.pageY:this.y,i=b.getTime(),h=this.keyTime||0,j=0.25,n;if(this.options.useTransition&&this.isInTransition){n=this.getComputedPosition();this._translate(Math.round(n.x),Math.round(n.y));this.isInTransition=false}this.keyAcceleration=i-h<200?Math.min(this.keyAcceleration+j,50):0;switch(l.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){m+=g?1:this.wrapperWidth}else{k+=g?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){m-=g?1:this.wrapperWidth}else{k-=g?1:this.wrapperHeight}break;case this.options.keyBindings.end:m=g?this.pages.length-1:this.maxScrollX;k=g?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:m=0;k=0;break;case this.options.keyBindings.left:m+=g?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:k+=g?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:m-=g?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:k-=g?1:5+this.keyAcceleration>>0;break;default:return}if(g){this.goToPage(m,k);return}if(m>0){m=0;this.keyAcceleration=0}else{if(m<this.maxScrollX){m=this.maxScrollX;this.keyAcceleration=0}}if(k>0){k=0;this.keyAcceleration=0}else{if(k<this.maxScrollY){k=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(m,k,0);this.keyTime=i},_animate:function(p,o,j,g){var m=this,l=this.x,k=this.y,h=b.getTime(),n=h+j;function i(){var q=b.getTime(),s,r,t;if(q>=n){m.isAnimating=false;m._translate(p,o);if(!m.resetPosition(m.options.bounceTime)){m._execEvent("scrollEnd")}return}q=(q-h)/j;t=g(q);s=(p-l)*t+l;r=(o-k)*t+k;m._translate(s,r);if(m.isAnimating){f(i)}if(m.options.probeType===3){m._execEvent("scroll")}}this.isAnimating=true;i()},handleEvent:function(g){switch(g.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(g);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(g);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(g);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(g);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(g);break;case"keydown":this._key(g);break;case"click":if(!g._constructed){g.preventDefault();g.stopPropagation()}break}}};function c(j,h,i){var k=document.createElement("div"),g=document.createElement("div");if(i===true){k.style.cssText="position:absolute;z-index:9999";g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}g.className="iScrollIndicator";if(j==="h"){if(i===true){k.style.cssText+=";height:5px;left:2px;right:2px;bottom:0";g.style.height="100%"}k.className="iScrollHorizontalScrollbar"}else{if(i===true){k.style.cssText+=";width:5px;bottom:2px;top:2px;right:1px";g.style.width="100%"}k.className="iScrollVerticalScrollbar"}k.style.cssText+=";overflow:hidden";if(!h){k.style.pointerEvents="none"}k.appendChild(g);return k}function a(g,h){this.wrapper=typeof h.el==="string"?document.querySelector(h.el):h.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=g;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var j in h){this.options[j]=h[j]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){b.addEvent(this.indicator,"touchstart",this);b.addEvent(d,"touchend",this)}if(!this.options.disablePointer){b.addEvent(this.indicator,b.prefixPointerEvent("pointerdown"),this);b.addEvent(d,b.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){b.addEvent(this.indicator,"mousedown",this);b.addEvent(d,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[b.style.transform]=this.scroller.translateZ;this.wrapperStyle[b.style.transitionDuration]=b.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}a.prototype={handleEvent:function(g){switch(g.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(g);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(g);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(g);break}},destroy:function(){if(this.options.interactive){b.removeEvent(this.indicator,"touchstart",this);b.removeEvent(this.indicator,b.prefixPointerEvent("pointerdown"),this);b.removeEvent(this.indicator,"mousedown",this);b.removeEvent(d,"touchmove",this);b.removeEvent(d,b.prefixPointerEvent("pointermove"),this);b.removeEvent(d,"mousemove",this);b.removeEvent(d,"touchend",this);b.removeEvent(d,b.prefixPointerEvent("pointerup"),this);b.removeEvent(d,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(h){var g=h.touches?h.touches[0]:h;h.preventDefault();h.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=g.pageX;this.lastPointY=g.pageY;this.startTime=b.getTime();if(!this.options.disableTouch){b.addEvent(d,"touchmove",this)}if(!this.options.disablePointer){b.addEvent(d,b.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){b.addEvent(d,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(l){var h=l.touches?l.touches[0]:l,i,g,m,k,j=b.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;i=h.pageX-this.lastPointX;this.lastPointX=h.pageX;g=h.pageY-this.lastPointY;this.lastPointY=h.pageY;m=this.x+i;k=this.y+g;this._pos(m,k);if(this.scroller.options.probeType===1&&j-this.startTime>300){this.startTime=j;this.scroller._execEvent("scroll")}else{if(this.scroller.options.probeType>1){this.scroller._execEvent("scroll")}}l.preventDefault();l.stopPropagation()},_end:function(i){if(!this.initiated){return}this.initiated=false;i.preventDefault();i.stopPropagation();b.removeEvent(d,"touchmove",this);b.removeEvent(d,b.prefixPointerEvent("pointermove"),this);b.removeEvent(d,"mousemove",this);if(this.scroller.options.snap){var g=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var h=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.scroller.x-g.x),1000),Math.min(Math.abs(this.scroller.y-g.y),1000)),300);if(this.scroller.x!==g.x||this.scroller.y!==g.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=g;this.scroller.scrollTo(g.x,g.y,h,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(g){g=g||0;this.indicatorStyle[b.style.transitionDuration]=g+"ms";if(!g&&b.isBadAndroid){this.indicatorStyle[b.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(g){this.indicatorStyle[b.style.transitionTimingFunction]=g},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){b.addClass(this.wrapper,"iScrollBothScrollbars");b.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{b.removeClass(this.wrapper,"iScrollBothScrollbars");b.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink==="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink==="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var g=this.options.listenX&&Math.round(this.sizeRatioX*this.scroller.x)||0,h=this.options.listenY&&Math.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(g<this.minBoundaryX){if(this.options.shrink==="scale"){this.width=Math.max(this.indicatorWidth+g,8);this.indicatorStyle.width=this.width+"px"}g=this.minBoundaryX}else{if(g>this.maxBoundaryX){if(this.options.shrink==="scale"){this.width=Math.max(this.indicatorWidth-(g-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";g=this.maxPosX+this.indicatorWidth-this.width}else{g=this.maxBoundaryX}}else{if(this.options.shrink==="scale"&&this.width!==this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(h<this.minBoundaryY){if(this.options.shrink==="scale"){this.height=Math.max(this.indicatorHeight+h*3,8);this.indicatorStyle.height=this.height+"px"}h=this.minBoundaryY}else{if(h>this.maxBoundaryY){if(this.options.shrink==="scale"){this.height=Math.max(this.indicatorHeight-(h-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";h=this.maxPosY+this.indicatorHeight-this.height}else{h=this.maxBoundaryY}}else{if(this.options.shrink==="scale"&&this.height!==this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=g;this.y=h;if(this.scroller.options.useTransform){this.indicatorStyle[b.style.transform]="translate("+g+"px,"+h+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=g+"px";this.indicatorStyle.top=h+"px"}},_pos:function(g,h){if(g<0){g=0}else{if(g>this.maxPosX){g=this.maxPosX}}if(h<0){h=0}else{if(h>this.maxPosY){h=this.maxPosY}}g=this.options.listenX?Math.round(g/this.sizeRatioX):this.scroller.x;h=this.options.listenY?Math.round(h/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(g,h)},fade:function(j,i){if(i&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var h=j?250:500,g=j?0:300;j=j?"1":"0";this.wrapperStyle[b.style.transitionDuration]=h+"ms";this.fadeTimeout=setTimeout((function(k){this.wrapperStyle.opacity=k;this.visible=+k}).bind(this,j),g)}};e.utils=b;d.IScroll=e}(window);+function(e){var d={scrollTop:e.fn.scrollTop,scrollLeft:e.fn.scrollLeft};(function(){e.extend(e.fn,{scrollTop:function(h,g){if(!this.length){return}var f=this.data("scroller");if(f&&f.scroller){return f.scrollTop(h,g)}else{return d.scrollTop.apply(this,arguments)}}});e.extend(e.fn,{scrollLeft:function(h,g){if(!this.length){return}var f=this.data("scroller");if(f&&f.scroller){return f.scrollLeft(h,g)}else{return d.scrollLeft.apply(this,arguments)}}})})();var b=function(g,p){var j=this.$pageContent=e(g);this.options=e.extend({},this._defaults,p);var m=this.options.type;var n=(m==="js")||(m==="auto"&&(e.device.android&&e.compareVersion("4.4.0",e.device.osVersion)>-1)||(m==="auto"&&(e.device.ios&&e.compareVersion("6.0.0",e.device.osVersion)>-1)));if(n){var h=j.find(".content-inner");if(!h[0]){var i=j.children();if(i.length<1){j.children().wrapAll('<div class="content-inner"></div>')}else{j.html('<div class="content-inner">'+j.html()+"</div>")}}if(j.hasClass("pull-to-refresh-content")){var o=e(window).height()+(j.prev().hasClass(".bar")?1:61);j.find(".content-inner").css("min-height",o+"px")}var f=e(g).hasClass("pull-to-refresh-content");var k=j.find(".fixed-tab").length===0;var q={probeType:1,mouseWheel:true,click:e.device.androidChrome,useTransform:k,scrollX:true};if(f){q.ptr=true;q.ptrOffset=44}this.scroller=new IScroll(g,q);this._bindEventToDomWhenJs();e.initPullToRefresh=e._pullToRefreshJSScroll.initPullToRefresh;e.pullToRefreshDone=e._pullToRefreshJSScroll.pullToRefreshDone;e.pullToRefreshTrigger=e._pullToRefreshJSScroll.pullToRefreshTrigger;e.destroyToRefresh=e._pullToRefreshJSScroll.destroyToRefresh;j.addClass("javascript-scroll");if(!k){j.find(".content-inner").css({width:"100%",position:"absolute"})}var l=this.$pageContent[0].scrollTop;if(l){this.$pageContent[0].scrollTop=0;this.scrollTop(l)}}else{j.addClass("native-scroll")}};b.prototype={_defaults:{type:"native"},_bindEventToDomWhenJs:function(){if(this.scroller){var f=this;this.scroller.on("scrollStart",function(){f.$pageContent.trigger("scrollstart")});this.scroller.on("scroll",function(){f.$pageContent.trigger("scroll")});this.scroller.on("scrollEnd",function(){f.$pageContent.trigger("scrollend")})}else{}},scrollTop:function(g,f){if(this.scroller){if(g!==undefined){this.scroller.scrollTo(0,-1*g,f)}else{return this.scroller.getComputedPosition().y*-1}}else{return this.$pageContent.scrollTop(g,f)}return this},scrollLeft:function(g,f){if(this.scroller){if(g!==undefined){this.scroller.scrollTo(-1*g,0)}else{return this.scroller.getComputedPosition().x*-1}}else{return this.$pageContent.scrollTop(g,f)}return this},on:function(f,g){if(this.scroller){this.scroller.on(f,function(){g.call(this.wrapper)})}else{this.$pageContent.on(f,g)}return this},off:function(f,g){if(this.scroller){this.scroller.off(f,g)}else{this.$pageContent.off(f,g)}return this},refresh:function(){if(this.scroller){this.scroller.refresh()}return this},scrollHeight:function(){if(this.scroller){return this.scroller.scrollerHeight}else{return this.$pageContent[0].scrollHeight}}};function c(h){var f=Array.apply(null,arguments);f.shift();var g;this.each(function(){var k=e(this);var i=e.extend({},k.dataset(),typeof h==="object"&&h);var j=k.data("scroller");if(!j){k.data("scroller",(j=new b(this,i)))}if(typeof h==="string"&&typeof j[h]==="function"){g=j[h].apply(j,f);if(g!==undefined){return false}}});if(g!==undefined){return g}else{return this}}var a=e.fn.scroller;e.fn.scroller=c;e.fn.scroller.Constructor=b;e.fn.scroller.noConflict=function(){e.fn.scroller=a;return this};e(function(){e('[data-toggle="scroller"]').scroller()});e.refreshScroller=function(f){if(f){e(f).scroller("refresh")}else{e(".javascript-scroll").each(function(){e(this).scroller("refresh")})}};e.initScroller=function(f){this.options=e.extend({},typeof f==="object"&&f);e('[data-toggle="scroller"],.content').scroller(f)};e.getScroller=function(f){f=f.hasClass("content")?f:f.parents(".content");if(f){return e(f).data("scroller")}else{return e(".content.javascript-scroll").data("scroller")}};e.detectScrollerType=function(f){if(f){if(e(f).data("scroller")&&e(f).data("scroller").scroller){return"js"}else{return"native"}}}}(Zepto);+function(c){var b=function(e,k,f){var j=c(e);if(arguments.length===2){if(typeof k==="boolean"){f=k}}if(j.length===0){return false}if(j.hasClass("active")){if(f){j.trigger("show")}return false}var d=j.parent(".tabs");if(d.length===0){return false}var h=d.children(".tab.active").removeClass("active");j.addClass("active");j.trigger("show");if(k){k=c(k)}else{if(typeof e==="string"){k=c('.tab-link[href="'+e+'"]')}else{k=c('.tab-link[href="#'+j.attr("id")+'"]')}if(!k||k&&k.length===0){c("[data-tab]").each(function(){if(j.is(c(this).attr("data-tab"))){k=c(this)}})}}if(k.length===0){return}var g;if(h&&h.length>0){var i=h.attr("id");if(i){g=c('.tab-link[href="#'+i+'"]')}if(!g||g&&g.length===0){c("[data-tab]").each(function(){if(h.is(c(this).attr("data-tab"))){g=c(this)}})}}if(k&&k.length>0){k.addClass("active")}if(g&&g.length>0){g.removeClass("active")}k.trigger("active");return true};var a=c.showTab;c.showTab=b;c.showTab.noConflict=function(){c.showTab=a;return this};c(document).on("click",".tab-link",function(f){f.preventDefault();var d=c(this);b(d.data("tab")||d.attr("href"),d)})}(Zepto);+function(b){b.initFixedTab=function(){var d=b(".fixed-tab");if(d.length===0){return}b(".fixed-tab").fixedTab()};var c=function(f,d){var e=this.$pageContent=b(f);var h=e.clone();var g=e[0].getBoundingClientRect().top;h.css("visibility","hidden");this.options=b.extend({},this._defaults,{fixedTop:g,shadow:h,offset:0},d);this._bindEvents()};c.prototype={_defaults:{offset:0},_bindEvents:function(){this.$pageContent.parents(".content").on("scroll",this._scrollHandler.bind(this));this.$pageContent.on("active",".tab-link",this._tabLinkHandler.bind(this))},_tabLinkHandler:function(d){var e=b(d.target).parents(".buttons-fixed").length>0;var g=this.options.fixedTop;var f=this.options.offset;b.refreshScroller();if(!e){return}this.$pageContent.parents(".content").scrollTop(g-f)},_scrollHandler:function(e){var i=b(e.target);var d=this.$pageContent;var k=this.options.shadow;var h=this.options.offset;var j=this.options.fixedTop;var g=i.scrollTop();var f=g>=j-h;if(f){k.insertAfter(d);d.addClass("buttons-fixed").css("top",h)}else{k.remove();d.removeClass("buttons-fixed").css("top",0)}}};function a(e){var d=Array.apply(null,arguments);d.shift();this.each(function(){var h=b(this);var f=b.extend({},h.dataset(),typeof e==="object"&&e);var g=h.data("fixedtab");if(!g){h.data("fixedtab",(g=new c(this,f)))}})}b.fn.fixedTab=a;b.fn.fixedTab.Constructor=c;b(document).on("pageInit",function(){b.initFixedTab()})}(Zepto);+function(e){var d=0;var f=function(k){var j=e(k);if(!j.hasClass("pull-to-refresh-content")){j=j.find(".pull-to-refresh-content")}if(!j||j.length===0){return}var m=j.hasClass("content")?j:j.parents(".content");var g=e.getScroller(m[0]);if(!g){return}var h=j;function i(){if(h.hasClass("refreshing")){return}if(g.scrollTop()*-1>=44){h.removeClass("pull-down").addClass("pull-up")}else{h.removeClass("pull-up").addClass("pull-down")}}function l(){if(h.hasClass("refreshing")){return}h.removeClass("pull-down pull-up");h.addClass("refreshing transitioning");h.trigger("refresh");d=+new Date()}g.on("scroll",i);g.scroller.on("ptr",l);function n(){g.off("scroll",i);g.scroller.off("ptr",l)}j[0].destroyPullToRefresh=n};var b=function(h){h=e(h);if(h.length===0){h=e(".pull-to-refresh-content.refreshing")}if(h.length===0){return}var i=(+new Date())-d;var j=i>1000?0:1000-i;var g=e.getScroller(h);setTimeout(function(){g.refresh();h.removeClass("refreshing");h.transitionEnd(function(){h.removeClass("transitioning")})},j)};var a=function(h){h=e(h);if(h.length===0){h=e(".pull-to-refresh-content")}if(h.hasClass("refreshing")){return}h.addClass("refreshing");var g=e.getScroller(h);g.scrollTop(44+1,200);h.trigger("refresh")};var c=function(h){h=e(h);var g=h.hasClass("pull-to-refresh-content")?h:h.find(".pull-to-refresh-content");if(g.length===0){return}if(g[0].destroyPullToRefresh){g[0].destroyPullToRefresh()}};e._pullToRefreshJSScroll={initPullToRefresh:f,pullToRefreshDone:b,pullToRefreshTrigger:a,destroyPullToRefresh:c}}(Zepto);+function(a){a.initPullToRefresh=function(t){var p=a(t);if(!p.hasClass("pull-to-refresh-content")){p=p.find(".pull-to-refresh-content")}if(!p||p.length===0){return}var s,j,d={},v,r,f,n,e=false,m=false,u=0,l,c,g,b,q;n=p;if(n.attr("data-ptr-distance")){q=true}else{b=44}function i(w){if(s){if(a.device.android){if("targetTouches" in w&&w.targetTouches.length>1){return}}else{return}}j=false;s=true;v=undefined;g=undefined;d.x=w.type==="touchstart"?w.targetTouches[0].pageX:w.pageX;d.y=w.type==="touchstart"?w.targetTouches[0].pageY:w.pageY;f=(new Date()).getTime();n=a(this)}function k(y){if(!s){return}var x=y.type==="touchmove"?y.targetTouches[0].pageX:y.pageX;var w=y.type==="touchmove"?y.targetTouches[0].pageY:y.pageY;if(typeof v==="undefined"){v=!!(v||Math.abs(w-d.y)>Math.abs(x-d.x))}if(!v){s=false;return}c=n[0].scrollTop;if(typeof g==="undefined"&&c!==0){g=true}if(!j){n.removeClass("transitioning");if(c>n[0].offsetHeight){s=false;return}if(q){b=n.attr("data-ptr-distance");if(b.indexOf("%")>=0){b=n[0].offsetHeight*parseInt(b,10)/100}}u=n.hasClass("refreshing")?b:0;if(n[0].scrollHeight===n[0].offsetHeight||!a.device.ios){m=true}else{m=false}m=true}j=true;r=w-d.y;if(r>0&&c<=0||c<0){if(a.device.ios&&parseInt(a.device.osVersion.split(".")[0],10)>7&&c===0&&!g){m=true}if(m){y.preventDefault();l=(Math.pow(r,0.85)+u);n.transform("translate3d(0,"+l+"px,0)")}else{}if((m&&Math.pow(r,0.85)>b)||(!m&&r>=b*2)){e=true;n.addClass("pull-up").removeClass("pull-down")}else{e=false;n.removeClass("pull-up").addClass("pull-down")}}else{n.removeClass("pull-up pull-down");e=false;return}}function o(){if(!s||!j){s=false;j=false;return}if(l){n.addClass("transitioning");l=0}n.transform("");if(e){if(n.hasClass("refreshing")){return}n.addClass("refreshing");n.trigger("refresh")}else{n.removeClass("pull-down")}s=false;j=false}p.on(a.touchEvents.start,i);p.on(a.touchEvents.move,k);p.on(a.touchEvents.end,o);function h(){p.off(a.touchEvents.start,i);p.off(a.touchEvents.move,k);p.off(a.touchEvents.end,o)}p[0].destroyPullToRefresh=h};a.pullToRefreshDone=function(b){a(window).scrollTop(0);b=a(b);if(b.length===0){b=a(".pull-to-refresh-content.refreshing")}b.removeClass("refreshing").addClass("transitioning");b.transitionEnd(function(){b.removeClass("transitioning pull-up pull-down")})};a.pullToRefreshTrigger=function(b){b=a(b);if(b.length===0){b=a(".pull-to-refresh-content")}if(b.hasClass("refreshing")){return}b.addClass("transitioning refreshing");b.trigger("refresh")};a.destroyPullToRefresh=function(c){c=a(c);var b=c.hasClass("pull-to-refresh-content")?c:c.find(".pull-to-refresh-content");if(b.length===0){return}if(b[0].destroyPullToRefresh){b[0].destroyPullToRefresh()}}}(Zepto);+function(b){function a(){var d=b(this);var h=b.getScroller(d);var e=h.scrollTop();var k=h.scrollHeight();var j=d[0].offsetHeight;var c=d[0].getAttribute("data-distance");var i=d.find(".virtual-list");var g;var f=d.hasClass("infinite-scroll-top");if(!c){c=50}if(typeof c==="string"&&c.indexOf("%")>=0){c=parseInt(c,10)/100*j}if(c>j){c=j}if(f){if(e<c){d.trigger("infinite")}}else{if(e+j>=k-c){if(i.length>0){g=i[0].f7VirtualList;if(g&&!g.reachEnd){return}}d.trigger("infinite")}}}b.attachInfiniteScroll=function(c){b.getScroller(c).on("scroll",a)};b.detachInfiniteScroll=function(c){b.getScroller(c).off("scroll",a)};b.initInfiniteScroll=function(e){e=b(e);var d=e.hasClass("infinite-scroll")?e:e.find(".infinite-scroll");if(d.length===0){return}b.attachInfiniteScroll(d);e.forEach(function(g){if(b(g).hasClass("infinite-scroll-top")){var f=g.scrollHeight-g.clientHeight;b(g).scrollTop(f)}});function c(){b.detachInfiniteScroll(d);e.off("pageBeforeRemove",c)}e.on("pageBeforeRemove",c)}}(Zepto);+function(a){a(function(){a(document).on("focus",".searchbar input",function(b){var c=a(b.target);c.parents(".searchbar").addClass("searchbar-active")});a(document).on("click",".searchbar-cancel",function(c){var b=a(c.target);b.parents(".searchbar").removeClass("searchbar-active")});a(document).on("blur",".searchbar input",function(b){var c=a(b.target);c.parents(".searchbar").removeClass("searchbar-active")})})}(Zepto);+function(a){a.allowPanelOpen=true;a.openPanel=function(b){if(!a.allowPanelOpen){return false}if(b==="left"||b==="right"){b=".panel-"+b}b=b?a(b):a(".panel").eq(0);var f=b.hasClass("panel-right")?"right":"left";if(b.length===0||b.hasClass("active")){return false}a.closePanel();a.allowPanelOpen=false;var d=b.hasClass("panel-reveal")?"reveal":"cover";b.css({display:"block"}).addClass("active");b.trigger("open");var h=b[0].clientLeft;var c=d==="reveal"?a(a.getCurrentPage()):b;var g=false;function e(){c.transitionEnd(function(i){if(i.target===c[0]){if(b.hasClass("active")){b.trigger("opened")}else{b.trigger("closed")}a.allowPanelOpen=true}else{e()}})}e();a(document.body).addClass("with-panel-"+f+"-"+d);return true};a.closePanel=function(){var d=a(".panel.active");if(d.length===0){return false}var c=d.hasClass("panel-reveal")?"reveal":"cover";var e=d.hasClass("panel-left")?"left":"right";d.removeClass("active");var b=c==="reveal"?a(".page"):d;d.trigger("close");a.allowPanelOpen=false;b.transitionEnd(function(){if(d.hasClass("active")){return}d.css({display:""});d.trigger("closed");a("body").removeClass("panel-closing");a.allowPanelOpen=true});a("body").addClass("panel-closing").removeClass("with-panel-"+e+"-"+c)};a(document).on("click",".open-panel",function(c){var b=a(c.target).data("panel");a.openPanel(b)});a(document).on("click",".close-panel, .panel-overlay",function(b){a.closePanel()});a.initSwipePanels=function(){var n,d;var c=a.smConfig.swipePanel;var t=a.smConfig.swipePanelOnlyClose;var s=true;var r=false;var y=2;var f=false;if(!(c||t)){return}var h=a(".panel-overlay");var u,k,x,e={},g,q,m,v,b,p,w;var i=a(".page");function j(z){if(!a.allowPanelOpen||(!c&&!t)||u){return}if(a(".modal-in, .photo-browser-in").length>0){return}if(!(s||t)){if(a(".panel.active").length>0&&!n.hasClass("active")){return}}e.x=z.type==="touchstart"?z.targetTouches[0].pageX:z.pageX;e.y=z.type==="touchstart"?z.targetTouches[0].pageY:z.pageY;if(s||t){if(a(".panel.active").length>0){d=a(".panel.active").hasClass("panel-left")?"left":"right"}else{if(t){return}d=c}if(!d){return}}n=a(".panel.panel-"+d);if(!n[0]){return}v=n.hasClass("active");if(r&&!v){if(d==="left"){if(e.x>r){return}}if(d==="right"){if(e.x<window.innerWidth-r){return}}}k=false;u=true;x=undefined;g=(new Date()).getTime();w=undefined}function l(C){if(!u){return}if(!n[0]){return}if(C.f7PreventPanelSwipe){return}var B=C.type==="touchmove"?C.targetTouches[0].pageX:C.pageX;var A=C.type==="touchmove"?C.targetTouches[0].pageY:C.pageY;if(typeof x==="undefined"){x=!!(x||Math.abs(A-e.y)>Math.abs(B-e.x))}if(x){u=false;return}if(!w){if(B>e.x){w="to-right"}else{w="to-left"}if(d==="left"&&(w==="to-left"&&!n.hasClass("active"))||d==="right"&&(w==="to-right"&&!n.hasClass("active"))){u=false;return}}if(f){var D=(new Date()).getTime()-g;if(D<300){if(w==="to-left"){if(d==="right"){a.openPanel(d)}if(d==="left"&&n.hasClass("active")){a.closePanel()}}if(w==="to-right"){if(d==="left"){a.openPanel(d)}if(d==="right"&&n.hasClass("active")){a.closePanel()}}}u=false;console.log(3);k=false;return}if(!k){p=n.hasClass("panel-cover")?"cover":"reveal";if(!v){n.show();h.show()}b=n[0].offsetWidth;n.transition(0)}k=true;C.preventDefault();var z=v?0:-y;if(d==="right"){z=-z}q=B-e.x+z;if(d==="right"){m=q-(v?b:0);if(m>0){m=0}if(m<-b){m=-b}}else{m=q+(v?b:0);if(m<0){m=0}if(m>b){m=b}}if(p==="reveal"){i.transform("translate3d("+m+"px,0,0)").transition(0);h.transform("translate3d("+m+"px,0,0)")}else{n.transform("translate3d("+m+"px,0,0)").transition(0)}}function o(C){if(!u||!k){u=false;k=false;return}u=false;k=false;var D=(new Date()).getTime()-g;var A;var z=(m===0||Math.abs(m)===b);if(!v){if(m===0){A="reset"}else{if(D<300&&Math.abs(m)>0||D>=300&&(Math.abs(m)>=b/2)){A="swap"}else{A="reset"}}}else{if(m===-b){A="reset"}else{if(D<300&&Math.abs(m)>=0||D>=300&&(Math.abs(m)<=b/2)){if(d==="left"&&m===b){A="reset"}else{A="swap"}}else{A="reset"}}}if(A==="swap"){a.allowPanelOpen=true;if(v){a.closePanel();if(z){n.css({display:""});a("body").removeClass("panel-closing")}}else{a.openPanel(d)}if(z){a.allowPanelOpen=true}}if(A==="reset"){if(v){a.allowPanelOpen=true;a.openPanel(d)}else{a.closePanel();if(z){a.allowPanelOpen=true;n.css({display:""})}else{var B=p==="reveal"?i:n;a("body").addClass("panel-closing");B.transitionEnd(function(){a.allowPanelOpen=true;n.css({display:""});a("body").removeClass("panel-closing")})}}}if(p==="reveal"){i.transition("");i.transform("")}n.transition("").transform("");h.css({display:""}).transform("")}a(document).on(a.touchEvents.start,j);a(document).on(a.touchEvents.move,l);a(document).on(a.touchEvents.end,o)};a.initSwipePanels()}(Zepto);+function(e){if(!window.CustomEvent){window.CustomEvent=function(k,j){j=j||{bubbles:false,cancelable:false,detail:undefined};var l=document.createEvent("CustomEvent");l.initCustomEvent(k,j.bubbles,j.cancelable,j.detail);return l};window.CustomEvent.prototype=window.Event.prototype}var f={pageLoadStart:"pageLoadStart",pageLoadCancel:"pageLoadCancel",pageLoadError:"pageLoadError",pageLoadComplete:"pageLoadComplete",pageAnimationStart:"pageAnimationStart",pageAnimationEnd:"pageAnimationEnd",beforePageRemove:"beforePageRemove",pageRemoved:"pageRemoved",beforePageSwitch:"beforePageSwitch",pageInit:"pageInitInternal"};var h={getUrlFragment:function(j){var k=j.indexOf("#");return k===-1?"":j.slice(k+1)},getAbsoluteUrl:function(j){var k=document.createElement("a");k.setAttribute("href",j);var l=k.href;k=null;return l},getBaseUrl:function(j){var k=j.indexOf("#");return k===-1?j.slice(0):j.slice(0,k)},toUrlObject:function(l){var j=this.getAbsoluteUrl(l),m=this.getBaseUrl(j),k=this.getUrlFragment(l);return{base:m,full:j,original:l,fragment:k}},supportStorage:function(){var j="sm.router.storage.ability";try{sessionStorage.setItem(j,j);sessionStorage.removeItem(j);return true}catch(k){return false}}};var c={sectionGroupClass:"page-group",curPageClass:"page-current",visiblePageClass:"page-visible",pageClass:"page"};var b={leftToRight:"from-left-to-right",rightToLeft:"from-right-to-left"};var i=window.history;var d=function(){this.sessionNames={currentState:"sm.router.currentState",maxStateId:"sm.router.maxStateId"};this._init();this.xhr=null;window.addEventListener("popstate",this._onPopState.bind(this))};d.prototype._init=function(){this.$view=e("body");this.cache={};var m=e(document);var p=location.href;this._saveDocumentIntoCache(m,p);var r;var o=h.toUrlObject(p);var l=m.find("."+c.pageClass);var j=m.find("."+c.curPageClass);var q=j.eq(0);var k;if(o.fragment){k=m.find("#"+o.fragment)}if(k&&k.length){j=k.eq(0)}else{if(!j.length){j=l.eq(0)}}if(!j.attr("id")){j.attr("id",this._generateRandomId())}if(q.length&&(q.attr("id")!==j.attr("id"))){q.removeClass(c.curPageClass);j.addClass(c.curPageClass)}else{j.addClass(c.curPageClass)}r=j.attr("id");if(i.state===null){var n={id:this._getNextStateId(),url:h.toUrlObject(p),pageId:r};i.replaceState(n,"",p);this._saveAsCurrentState(n);this._incMaxStateId()}};d.prototype.load=function(j,k){if(k===undefined){k=false}if(this._isTheSameDocument(location.href,j)){this._switchToSection(h.getUrlFragment(j))}else{this._saveDocumentIntoCache(e(document),location.href);this._switchToDocument(j,k)}};d.prototype.forward=function(){i.forward()};d.prototype.back=function(){i.back()};d.prototype.loadPage=d.prototype.load;d.prototype._switchToSection=function(l){if(!l){return}var j=this._getCurrentSection(),k=e("#"+l);if(j===k){return}this._animateSection(j,k,b.rightToLeft);this._pushNewState("#"+l,l)};d.prototype._switchToDocument=function(j,o,p,n){var m=h.toUrlObject(j).base;if(o){delete this.cache[m]}var l=this.cache[m];var k=this;if(l){this._doSwitchDocument(j,p,n)}else{this._loadDocument(j,{success:function(r){try{k._parseDocument(j,r);k._doSwitchDocument(j,p,n)}catch(q){location.href=j}},error:function(){location.href=j}})}};d.prototype._doSwitchDocument=function(k,q,r){if(typeof q==="undefined"){q=true}var m=h.toUrlObject(k);var n=this.$view.find("."+c.sectionGroupClass);var o=e(e("<div></div>").append(this.cache[m.base].$content).html());var p=o.find("."+c.pageClass);var j=o.find("."+c.curPageClass);var l;if(m.fragment){l=o.find("#"+m.fragment)}if(l&&l.length){j=l.eq(0)}else{if(!j.length){j=p.eq(0)}}if(!j.attr("id")){j.attr("id",this._generateRandomId())}var s=this._getCurrentSection();s.trigger(f.beforePageSwitch,[s.attr("id"),s]);p.removeClass(c.curPageClass);j.addClass(c.curPageClass);this.$view.prepend(o);this._animateDocument(n,o,j,r);if(q){this._pushNewState(k,j.attr("id"))}};d.prototype._isTheSameDocument=function(j,k){return h.toUrlObject(j).base===h.toUrlObject(k).base};d.prototype._loadDocument=function(k,l){if(this.xhr&&this.xhr.readyState<4){this.xhr.onreadystatechange=function(){};this.xhr.abort();this.dispatch(f.pageLoadCancel)}this.dispatch(f.pageLoadStart);l=l||{};var j=this;this.xhr=e.ajax({url:k,success:e.proxy(function(n,m,o){var p=e("<html></html>");p.append(n);l.success&&l.success.call(null,p,m,o)},this),error:function(o,m,n){l.error&&l.error.call(null,o,m,n);j.dispatch(f.pageLoadError)},complete:function(n,m){l.complete&&l.complete.call(null,n,m);j.dispatch(f.pageLoadComplete)}})};d.prototype._parseDocument=function(j,l){var k=l.find("."+c.sectionGroupClass);if(!k.length){throw new Error("missing router view mark: "+c.sectionGroupClass)}this._saveDocumentIntoCache(l,j)};d.prototype._saveDocumentIntoCache=function(l,j){var k=h.toUrlObject(j).base;var m=e(l);this.cache[k]={$doc:m,$content:m.find("."+c.sectionGroupClass)}};d.prototype._getLastState=function(){var j=sessionStorage.getItem(this.sessionNames.currentState);try{j=JSON.parse(j)}catch(k){j=null}return j};d.prototype._saveAsCurrentState=function(j){sessionStorage.setItem(this.sessionNames.currentState,JSON.stringify(j))};d.prototype._getNextStateId=function(){var j=sessionStorage.getItem(this.sessionNames.maxStateId);return j?parseInt(j,10)+1:1};d.prototype._incMaxStateId=function(){sessionStorage.setItem(this.sessionNames.maxStateId,this._getNextStateId())};d.prototype._animateDocument=function(l,o,n,m){var k=n.attr("id");var j=l.find("."+c.curPageClass);j.addClass(c.visiblePageClass).removeClass(c.curPageClass);n.trigger(f.pageAnimationStart,[k,n]);this._animateElement(l,o,m);l.animationEnd(function(){j.removeClass(c.visiblePageClass);e(window).trigger(f.beforePageRemove,[l]);l.remove();e(window).trigger(f.pageRemoved)});o.animationEnd(function(){n.trigger(f.pageAnimationEnd,[k,n]);n.trigger(f.pageInit,[k,n])})};d.prototype._animateSection=function(k,m,l){var j=m.attr("id");k.trigger(f.beforePageSwitch,[k.attr("id"),k]);k.removeClass(c.curPageClass);m.addClass(c.curPageClass);m.trigger(f.pageAnimationStart,[j,m]);this._animateElement(k,m,l);m.animationEnd(function(){m.trigger(f.pageAnimationEnd,[j,m]);m.trigger(f.pageInit,[j,m])})};d.prototype._animateElement=function(l,o,n){if(typeof n==="undefined"){n=b.rightToLeft}var k=["page-from-center-to-left","page-from-center-to-right","page-from-right-to-center","page-from-left-to-center"].join(" ");var m,j;switch(n){case b.rightToLeft:m="page-from-center-to-left";j="page-from-right-to-center";break;case b.leftToRight:m="page-from-center-to-right";j="page-from-left-to-center";break;default:m="page-from-center-to-left";j="page-from-right-to-center";break}l.removeClass(k).addClass(m);o.removeClass(k).addClass(j);l.animationEnd(function(){l.removeClass(k)});o.animationEnd(function(){o.removeClass(k)})};d.prototype._getCurrentSection=function(){return this.$view.find("."+c.curPageClass).eq(0)};d.prototype._back=function(k,l){if(this._isTheSameDocument(k.url.full,l.url.full)){var j=e("#"+k.pageId);if(j.length){var m=this._getCurrentSection();this._animateSection(m,j,b.leftToRight);this._saveAsCurrentState(k)}else{location.href=k.url.full}}else{this._saveDocumentIntoCache(e(document),l.url.full);this._switchToDocument(k.url.full,false,false,b.leftToRight);this._saveAsCurrentState(k)}};d.prototype._forward=function(k,l){if(this._isTheSameDocument(k.url.full,l.url.full)){var j=e("#"+k.pageId);if(j.length){var m=this._getCurrentSection();this._animateSection(m,j,b.rightToLeft);this._saveAsCurrentState(k)}else{location.href=k.url.full}}else{this._saveDocumentIntoCache(e(document),l.url.full);this._switchToDocument(k.url.full,false,false,b.rightToLeft);this._saveAsCurrentState(k)}};d.prototype._onPopState=function(k){var l=k.state;if(!l||!l.pageId){return}var j=this._getLastState();if(!j){console.error&&console.error("Missing last state when backward or forward");return}if(l.id===j.id){return}if(l.id<j.id){this._back(l,j)}else{this._forward(l,j)}};d.prototype._pushNewState=function(j,k){var l={id:this._getNextStateId(),pageId:k,url:h.toUrlObject(j)};i.pushState(l,"",j);this._saveAsCurrentState(l);this._incMaxStateId()};d.prototype._generateRandomId=function(){return"page-"+(+new Date())};d.prototype.dispatch=function(j){var k=new CustomEvent(j,{bubbles:true,cancelable:true});window.dispatchEvent(k)};function g(j){var l=["external","tab-link","open-popup","close-popup","open-panel","close-panel"];for(var k=l.length-1;k>=0;k--){if(j.hasClass(l[k])){return true}}var m=j.get(0);var n=m.getAttribute("href");var o=["http","https"];if(/^(\w+):/.test(n)&&o.indexOf(RegExp.$1)<0){return true}if(m.hasAttribute("external")){return true}return false}function a(j){var l=e.smConfig.routerFilter;if(e.isFunction(l)){var k=l(j);if(typeof k==="boolean"){return k}}return true}e(function(){if(!e.smConfig.router){return}if(!h.supportStorage()){return}var l=e("."+c.pageClass);if(!l.length){var k="Disable router function because of no .page elements";if(window.console&&window.console.warn){console.warn(k)}return}var j=e.router=new d();e(document).on("click","a",function(q){var m=e(q.currentTarget);var o=a(m);if(!o){return}if(g(m)){return}q.preventDefault();if(m.hasClass("back")){j.back()}else{var n=m.attr("href");if(!n||n==="#"){return}var p=m.attr("data-no-cache")==="true";j.load(n,p)}})})}(Zepto);+function(a){a.lastPosition=function(b){if(!sessionStorage){return}var e=b.needMemoryClass||[];a(window).off("beforePageSwitch").on("beforePageSwitch",function(g,h,f){d(h,f)});a(window).off("pageAnimationStart").on("pageAnimationStart",function(g,h,f){c(h,f)});function c(g,f){e.forEach(function(i,h){if(a(i).length===0){return}var k=g;var j=sessionStorage.getItem(k);f.find(i).scrollTop(parseInt(j))})}function d(h,f){var g=h;e.forEach(function(j,i){if(a(j).length===0){return}sessionStorage.setItem(g,f.find(j).scrollTop())})}}}(Zepto);+function(b){var a=function(){var c=b(".page-current");if(!c[0]){c=b(".page").addClass("page-current")}return c};b.initPage=function(e){var d=a();if(!d[0]){d=b(document.body)}var c=d.hasClass("content")?d:d.find(".content");c.scroller();b.initPullToRefresh(c);b.initInfiniteScroll(c);b.initCalendar(c);if(b.initSwiper){b.initSwiper(c)}};if(b.smConfig.showPageLoadingIndicator){b(window).on("pageLoadStart",function(){b.showIndicator()});b(window).on("pageAnimationStart",function(){b.hideIndicator()});b(window).on("pageLoadCancel",function(){b.hideIndicator()});b(window).on("pageLoadComplete",function(){b.hideIndicator()});b(window).on("pageLoadError",function(){b.hideIndicator();b.toast("加载失败")})}b(window).on("pageAnimationStart",function(c,e,d){b.closeModal();b.closePanel();b("body").removeClass("panel-closing");b.allowPanelOpen=true});b(window).on("pageInit",function(){b.hideIndicator();b.lastPosition({needMemoryClass:[".content"]})});window.addEventListener("pageshow",function(c){if(c.persisted){location.reload()}});b.init=function(){var c=a();var d=c[0].id;b.initPage();c.trigger("pageInit",[d,c])};b(function(){FastClick.attach(document.body);if(b.smConfig.autoInit){b.init()}b(document).on("pageInitInternal",function(d,f,c){b.init()})})}(Zepto);+function(c){if(c.device.ios){var a=function(f){var e;var d;f=f||document.querySelector(f);if(!f){return}f.addEventListener("touchstart",function(g){e=g.touches[0].pageY;d=f.scrollTop;if(d<=0){f.scrollTop=1}if(d+f.offsetHeight>=f.scrollHeight){f.scrollTop=f.scrollHeight-f.offsetHeight-1}},false)};var b=function(){var e=c(".page-current").length>0?".page-current ":"";var d=c(e+".content");new a(d[0])};c(document).on(c.touchEvents.move,".page-current .bar",function(){event.preventDefault()});c(document).on("pageLoadComplete",function(){b()});c(document).on("pageAnimationEnd",function(){b()});b()}}(Zepto);